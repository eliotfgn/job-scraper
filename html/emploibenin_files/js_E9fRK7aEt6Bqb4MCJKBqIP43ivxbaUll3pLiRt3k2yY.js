Drupal.locale = { 'pluralFormula': function ($n) { return Number(($n!=1)); }, 'strings': {"":{"An AJAX HTTP error occurred.":"Une erreur HTTP AJAX s\u0027est produite.","HTTP Result Code: !status":"Code de statut HTTP : !status","An AJAX HTTP request terminated abnormally.":"Une requ\u00eate HTTP AJAX s\u0027est termin\u00e9e anormalement.","Debugging information follows.":"Informations de d\u00e9bogage ci-dessous.","Path: !uri":"Chemin : !uri","StatusText: !statusText":"StatusText: !statusText","ResponseText: !responseText":"ResponseText : !responseText","ReadyState: !readyState":"ReadyState : !readyState","CustomMessage: !customMessage":"Message personalis\u00e9 : !customMessage","Loading":"En cours de chargement","(active tab)":"(onglet actif)","Hide":"Masquer","Show":"Afficher","Select all rows in this table":"S\u00e9lectionner toutes les lignes du tableau","Deselect all rows in this table":"D\u00e9s\u00e9lectionner toutes les lignes du tableau","Edit":"Modifier","Re-order rows by numerical weight instead of dragging.":"R\u00e9-ordonner les lignes avec des poids num\u00e9riques plut\u00f4t qu\u0027en les d\u00e9pla\u00e7ant.","Show row weights":"Afficher le poids des lignes","Hide row weights":"Cacher le poids des lignes","Drag to re-order":"Cliquer-d\u00e9poser pour r\u00e9-organiser","Changes made in this table will not be saved until the form is submitted.":"Les changements effectu\u00e9s dans ce tableau ne seront pris en compte que lorsque la configuration aura \u00e9t\u00e9 enregistr\u00e9e.","Autocomplete popup":"Popup d\u0027auto-compl\u00e9tion","Searching for matches...":"Recherche de correspondances...","Hide summary":"Masquer le r\u00e9sum\u00e9","Edit summary":"Modifier le r\u00e9sum\u00e9","Please wait...":"Veuillez patienter...","The response failed verification so will not be processed.":"La v\u00e9rification de la r\u00e9ponse \u00e0 \u00e9chou\u00e9e, elle ne sera pas trait\u00e9e.","The callback URL is not local and not trusted: !url":"L\u0027URL de retour n\u0027est pas locale et n\u0027est pas de confiance : !url","The selected file %filename cannot be uploaded. Only files with the following extensions are allowed: %extensions.":"Le fichier s\u00e9lectionn\u00e9 %filename ne peut pas \u00eatre transf\u00e9r\u00e9. Seulement les fichiers avec les extensions suivantes sont permis : %extensions.","Not in menu":"Pas dans le menu","New revision":"Nouvelle r\u00e9vision","No revision":"Aucune r\u00e9vision","By @name on @date":"Par @name le @date","By @name":"Par @name","Not published":"Non publi\u00e9","Alias: @alias":"Alias : @alias","No alias":"Aucun alias","Configure":"Configurer","Requires a title":"Titre obligatoire","Don\u0027t display post information":"Ne pas afficher les informations de la contribution","Done":"Termin\u00e9","Select all":"Tout s\u00e9lectionner","This permission is inherited from the authenticated user role.":"Ce droit est h\u00e9rit\u00e9e du r\u00f4le de l\u0027utilisateur authentifi\u00e9.","Prev":"Pr\u00e9c.","Next":"Suivant","Today":"Aujourd\u0027hui","January":"Janvier","February":"F\u00e9vrier","March":"Mars","April":"Avril","May":"Mai","June":"Juin","July":"Juillet","August":"Ao\u00fbt","September":"Septembre","October":"Octobre","November":"Novembre","December":"D\u00e9cembre","Jan":"Jan","Feb":"F\u00e9v","Mar":"Mar","Apr":"Avr","Jun":"Juin","Jul":"Juil","Aug":"Ao\u00fb","Sep":"Sep","Oct":"Oct","Nov":"Nov","Dec":"D\u00e9c","Sunday":"Dimanche","Monday":"Lundi","Tuesday":"Mardi","Wednesday":"Mercredi","Thursday":"Jeudi","Friday":"Vendredi","Saturday":"Samedi","Sun":"dim","Mon":"lun","Tue":"mar","Wed":"mer","Thu":"jeu","Fri":"ven","Sat":"sam","Su":"Di","Mo":"Lu","Tu":"Ma","We":"Me","Th":"Je","Fr":"Ve","Sa":"Sa","mm\/dd\/yy":"dd\/mm\/yy","Automatic alias":"Alias automatique","Available tokens":"Jetons (tokens) disponibles","Insert this token into your form":"Ins\u00e9rer ce jeton (\u003Cem\u003Etoken\u003C\/em\u003E) dans votre formulaire","First click a text field to insert your tokens into.":"Cliquez d\u0027abord sur un champ de texte pour ins\u00e9rer vos jetons (\u003Cem\u003Etokens\u003C\/em\u003E) dans celui -ci.","Not shippable":"Pas exp\u00e9diable","SKU":"R\u00e9f\u00e9rence","Sell price":"Prix de vente","Shippable":"Livrable","Remove group":"Supprimer le groupe","Are you sure you want to delete this item ?":"\u00cates-vous s\u00fbr de vouloir supprimer cet \u00e9l\u00e9ment ?","Delete":"Supprimer","Enter in a few keywords separated by \u0022;\u0022 skills that best describe your expertise":"\u00c9crivez en quelques mots cl\u00e9s s\u00e9par\u00e9s par des \u0022;\u0022 les comp\u00e9tences qui r\u00e9sument le mieux votre expertise","Yes":"Oui","No":"Non","Save \u0026 Continue":"Enregistrer et continuer","Not restricted":"Non restreint","Restricted to certain pages":"R\u00e9serv\u00e9 \u00e0 certaines pages","Not customizable":"Non personnalisable","The changes to these blocks will not be saved until the \u003Cem\u003ESave blocks\u003C\/em\u003E button is clicked.":"N\u0027oubliez pas de cliquer sur \u003Cem\u003EEnregistrer les blocs\u003C\/em\u003E pour confirmer les modifications apport\u00e9es ici.","The block cannot be placed in this region.":"Le bloc ne peut pas \u00eatre plac\u00e9 dans cette r\u00e9gion.","Keywords":"Mots-cl\u00e9s","What profile are you looking for ?":"Quel profil recherchez-vous ?","What job are you looking for ?":"Quel poste recherchez-vous ?","Page N\u00b0":"N\u00b0 de page","Complete":"Termin\u00e9","An error occurred.":"Une erreur s\u0027est produite.","Select All":"Tout s\u00e9lectionner","Select None":"Aucun","No name":"Aucun nom","No style":"Aucun style","Uncheck all":"Tout d\u00e9cocher","Toggle":"Inverser","Check all":"Tout cocher","Search":"Rechercher","This field is required.":"Ce champ est obligatoire.","None":"Aucun(e)","Selected":"S\u00e9lectionn\u00e9","Content limited to @limit characters, remaining: \u003Cstrong\u003E@remaining\u003C\/strong\u003E":"limite de @limit caract\u00e8res, il reste: \u003Cstrong\u003E@remaining\u003C\/strong\u003E","Enter the name of your folder":"Entrez le nom de votre dossier","Enter valid name of your folder":"Entrez un nom de dossier valide.","The length of your folder should be between 3 and 70 caracters max":"La taille du  nom de dossier doit \u00eatre comprise entre 3 et 70 caract\u00e8res au max.","read more":"lire la suite","Employment":"Emploi","Recruitment":"Recrutement","Show more":"En afficher plus","Show fewer":"En afficher moins","Internal server error. Please see server or PHP logs for error information.":"Erreur interne du serveur. Consultez les logs du serveur ou les logs PHP pour plus d\u0027informations sur l\u0027erreur.","An error occurred at @path.\n\nError Description: @error":"Une erreur s\u0027est produite \u00e0 @path.\r\n\r\nDescription de l\u0027erreur : @error","Create thumbnails":"Cr\u00e9er des vignettes","Please select a file.":"Veuillez s\u00e9lectionner un fichier.","You are not allowed to operate on more than %num files.":"Vous n\u0027\u00eates pas autoris\u00e9(e) \u00e0 effectuer des op\u00e9rations sur plus de %num fichiers.","Please specify dimensions within the allowed range that is from 1x1 to @dimensions.":"Veuillez sp\u00e9cifier des dimensions dans la plage autoris\u00e9e, soit de 1x1 \u00e0 @dimensions.","%filename is not an image.":"%filename n\u0027est pas une image.","File browsing is disabled in directory %dir.":"L\u0027exploration des fichiers est d\u00e9sactiv\u00e9e dans le r\u00e9pertoire %dir.","You can not perform this operation.":"Vous ne pouvez pas r\u00e9aliser cette op\u00e9ration.","Do you want to refresh the current directory?":"Souhaitez-vous rafra\u00eechir le r\u00e9pertoire courant ?","Delete selected files?":"Voulez-vous vraiment supprimer les fichiers s\u00e9lectionn\u00e9s ?","Please select a thumbnail.":"Veuillez s\u00e9lectionner une vignette.","Log messages":"Journaliser les messages","You must select at least %num files.":"Vous devez s\u00e9lectionner au moins %num fichier(s).","Change view":"Changer la vue","Insert file":"Ins\u00e9rer un fichier","Split summary at cursor":"Cr\u00e9er un r\u00e9sum\u00e9 \u00e0 partir du curseur","Join summary":"Fusionner le r\u00e9sum\u00e9 et le corps du message","An error occurred at @path.":"Une erreur est survenue \u00e0 l\u0027adresse @path.","Machine name:":"Nom syst\u00e8me :","Are you sure you want to remove this item?":"\u00cates-vous s\u00fbr(e) de vouloir retirer cet \u00e9l\u00e9ment ?","jQuery UI Tabs: Mismatching fragment identifier.":"Onglets jQuery UI : identifiant de fragment ne correspondant pas.","jQuery UI Tabs: Not enough arguments to add tab.":"Onglets jQuery UI : pas assez d\u0027arguments pour ajouter l\u0027onglet.","- No operation found in this view -":"- Aucune op\u00e9ration trouv\u00e9e pour cette vue -","All ":"Tout","Export the list of selected applications into an Excel file":"Exportez la liste des candidatures s\u00e9lectionn\u00e9es dans un fichier Excel","Buy this CV":"Acheter ce CV","Invalid number":"Num\u00e9ro invalide","Invalid country code":"Indicatif non valide","Too short number":"Num\u00e9ro trop court","Too long number":"Num\u00e9ro trop long","example:":"exemple :","e.g.:":"ex :","Fill in your key skills to facilitate your job search":"Renseignez vos comp\u00e9tences cl\u00e9s pour faciliter votre recherche d\u00b4emploi","Fill in the key skills for this position for better results":"Renseignez les comp\u00e9tences cl\u00e9s du poste pour un meilleur r\u00e9sultat"}} };;
(function ($) {

  Drupal.behaviors.facetapi = {
    attach: function(context, settings) {
      // Iterates over facet settings, applies functionality like the "Show more"
      // links for block realm facets.
      // @todo We need some sort of JS API so we don't have to make decisions
      // based on the realm.
      if (settings.facetapi) {
        for (var index in settings.facetapi.facets) {
          if (null != settings.facetapi.facets[index].makeCheckboxes) {
            Drupal.facetapi.makeCheckboxes(settings.facetapi.facets[index].id);
          }
          if (null != settings.facetapi.facets[index].limit) {
            // Applies soft limit to the list.
            Drupal.facetapi.applyLimit(settings.facetapi.facets[index]);
          }
        }
      }
    }
  };

  /**
   * Class containing functionality for Facet API.
   */
  Drupal.facetapi = {};

  /**
   * Applies the soft limit to facets in the block realm.
   */
  Drupal.facetapi.applyLimit = function(settings) {
    if (settings.limit > 0 && !$('ul#' + settings.id).hasClass('facetapi-processed')) {
      // Only process this code once per page load.
      $('ul#' + settings.id).addClass('facetapi-processed');

      // Ensures our limit is zero-based, hides facets over the limit.
      var limit = settings.limit - 1;
      $('ul#' + settings.id).find('li:gt(' + limit + ')').hide();

      // Adds "Show more" / "Show fewer" links as appropriate.
      $('ul#' + settings.id).filter(function() {
        return $(this).find('li').length > settings.limit;
      }).each(function() {
        $('<a href="#" class="facetapi-limit-link"></a>').text(settings.showMoreText).click(function() {
          if ($(this).hasClass('open')) {
            $(this).siblings().find('li:gt(' + limit + ')').slideUp();
            $(this).removeClass('open').text(settings.showMoreText);
          }
          else {
            $(this).siblings().find('li:gt(' + limit + ')').slideDown();
            $(this).addClass('open').text(Drupal.t(settings.showFewerText));
          }
          return false;
        }).insertAfter($(this));
      });
    }
  };

  /**
   * Constructor for the facetapi redirect class.
   */
  Drupal.facetapi.Redirect = function(href) {
    this.href = href;
  };

  /**
   * Method to redirect to the stored href.
   */
  Drupal.facetapi.Redirect.prototype.gotoHref = function() {
    window.location.href = this.href;
  };

  /**
   * Turns all facet links into checkboxes.
   * Ensures the facet is disabled if a link is clicked.
   */
  Drupal.facetapi.makeCheckboxes = function(facet_id) {
    var $facet = $('#' + facet_id),
        $items = $('a.facetapi-checkbox, span.facetapi-checkbox', $facet);

    // Find all checkbox facet links and give them a checkbox.
    $items.once('facetapi-makeCheckbox').each(Drupal.facetapi.makeCheckbox);
    $items.once('facetapi-disableClick').click(function (e) {
      Drupal.facetapi.disableFacet($facet);
    });
  };

  /**
   * Disable all facet links and checkboxes in the facet and apply a 'disabled'
   * class.
   */
  Drupal.facetapi.disableFacet = function ($facet) {
    var $elem = $(this);
    // Apply only for links.
    if ($elem[0].tagName == 'A') {
      $facet.addClass('facetapi-disabled');
      $('a.facetapi-checkbox').click(Drupal.facetapi.preventDefault);
      $('input.facetapi-checkbox', $facet).attr('disabled', true);
    }
  };

  /**
   * Event listener for easy prevention of event propagation.
   */
  Drupal.facetapi.preventDefault = function (e) {
    e.preventDefault();
  };

  /**
   * Replace an unclick link with a checked checkbox.
   */
  Drupal.facetapi.makeCheckbox = function() {
    var $elem = $(this),
        active = $elem.hasClass('facetapi-active');

    if (!active && !$elem.hasClass('facetapi-inactive')) {
      // Not a facet element.
      return;
    }

    // Derive an ID and label for the checkbox based on the associated link.
    // The label is required for accessibility, but it duplicates information
    // in the link itself, so it should only be shown to screen reader users.
    var id = this.id + '--checkbox',
        description = $elem.find('.element-invisible').html(),
        label = $('<label class="element-invisible" for="' + id + '">' + description + '</label>');

    // Link for elements with count 0.
    if ($elem[0].tagName == 'A') {
      var checkbox = $('<input type="checkbox" class="facetapi-checkbox" id="' + id + '" />'),
        // Get the href of the link that is this DOM object.
        href = $elem.attr('href'),
        redirect = new Drupal.facetapi.Redirect(href);
    }
    // Link for elements with count more than 0.
    else {
      var checkbox = $('<input disabled type="checkbox" class="facetapi-checkbox" id="' + id + '" />');
    }

    checkbox.click(function (e) {
      Drupal.facetapi.disableFacet($elem.parents('ul.facetapi-facetapi-checkbox-links'));
      redirect.gotoHref();
    });

    if (active) {
      checkbox.attr('checked', true);
      // Add the checkbox and label, hide the link.
      $elem.before(label).before(checkbox).hide();
    }
    else {
      $elem.before(label).before(checkbox);
    }
  };

})(jQuery);
;
/*
 * International Telephone Input v14.0.6
 * https://github.com/jackocnr/intl-tel-input.git
 * Licensed under the MIT license
 */

// wrap in UMD
(function(factory) {
    var intlTelInput = factory(window, document);
    if (typeof module === "object" && module.exports) module.exports = intlTelInput; else window.intlTelInput = intlTelInput;
})(function(window, document, undefined) {
    "use strict";
    return function() {
        // Array of country objects for the flag dropdown.
        // Here is the criteria for the plugin to support a given country/territory
        // - It has an iso2 code: https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2
        // - It has it's own country calling code (it is not a sub-region of another country): https://en.wikipedia.org/wiki/List_of_country_calling_codes
        // - It has a flag in the region-flags project: https://github.com/behdad/region-flags/tree/gh-pages/png
        // - It is supported by libphonenumber (it must be listed on this page): https://github.com/googlei18n/libphonenumber/blob/master/resources/ShortNumberMetadata.xml
        // Each country array has the following information:
        // [
        //    Country name,
        //    iso2 code,
        //    International dial code,
        //    Order (if >1 country with same dial code),
        //    Area codes
        // ]
        var allCountries = [ [ "Afghanistan (‫افغانستان‬‎)", "af", "93" ], [ "Albania (Shqipëri)", "al", "355" ], [ "Algérie (‫الجزائر‬‎)", "dz", "213" ], [ "American Samoa", "as", "1684" ], [ "Andorra", "ad", "376" ], [ "Angola", "ao", "244" ], [ "Anguilla", "ai", "1264" ], [ "Antigua and Barbuda", "ag", "1268" ], [ "Argentina", "ar", "54" ], [ "Armenia (Հայաստան)", "am", "374" ], [ "Aruba", "aw", "297" ], [ "Australia", "au", "61", 0 ], [ "Austria (Österreich)", "at", "43" ], [ "Azerbaijan (Azərbaycan)", "az", "994" ], [ "Bahamas", "bs", "1242" ], [ "Bahrain (‫البحرين‬‎)", "bh", "973" ], [ "Bangladesh (বাংলাদেশ)", "bd", "880" ], [ "Barbados", "bb", "1246" ], [ "Belarus (Беларусь)", "by", "375" ], [ "Belgium (België)", "be", "32" ], [ "Belize", "bz", "501" ], [ "Bénin (Benin)", "bj", "229" ], [ "Bermuda", "bm", "1441" ], [ "Bhutan (འབྲུག)", "bt", "975" ], [ "Bolivia", "bo", "591" ], [ "Bosnia and Herzegovina (Босна и Херцеговина)", "ba", "387" ], [ "Botswana", "bw", "267" ], [ "Brazil (Brasil)", "br", "55" ], [ "British Indian Ocean Territory", "io", "246" ], [ "British Virgin Islands", "vg", "1284" ], [ "Brunei", "bn", "673" ], [ "Bulgaria (България)", "bg", "359" ], [ "Burkina Faso", "bf", "226" ], [ "Burundi (Uburundi)", "bi", "257" ], [ "Cambodia (កម្ពុជា)", "kh", "855" ], [ "Cameroun (Cameroon)", "cm", "237" ], [ "Canada", "ca", "1", 1, [ "204", "226", "236", "249", "250", "289", "306", "343", "365", "387", "403", "416", "418", "431", "437", "438", "450", "506", "514", "519", "548", "579", "581", "587", "604", "613", "639", "647", "672", "705", "709", "742", "778", "780", "782", "807", "819", "825", "867", "873", "902", "905" ] ], [ "Cape Verde (Kabu Verdi)", "cv", "238" ], [ "Caribbean Netherlands", "bq", "599", 1 ], [ "Cayman Islands", "ky", "1345" ], [ "République centrafricaine (Central African Republic)", "cf", "236" ], [ "Tchad (Chad)", "td", "235" ], [ "Chile", "cl", "56" ], [ "China (中国)", "cn", "86" ], [ "Christmas Island", "cx", "61", 2 ], [ "Cocos (Keeling) Islands", "cc", "61", 1 ], [ "Colombia", "co", "57" ], [ "Comoros (‫جزر القمر‬‎)", "km", "269" ], [ "Congo (RDC Congo-Kinshasa) (DRC)", "cd", "243" ], [ "Congo (Congo-Brazzaville) (Republic)", "cg", "242" ], [ "Cook Islands", "ck", "682" ], [ "Costa Rica", "cr", "506" ], [ "Côte d’Ivoire", "ci", "225" ], [ "Croatia (Hrvatska)", "hr", "385" ], [ "Cuba", "cu", "53" ], [ "Curaçao", "cw", "599", 0 ], [ "Cyprus (Κύπρος)", "cy", "357" ], [ "Czech Republic (Česká republika)", "cz", "420" ], [ "Denmark (Danmark)", "dk", "45" ], [ "Djibouti", "dj", "253" ], [ "Dominica", "dm", "1767" ], [ "Dominican Republic (República Dominicana)", "do", "1", 2, [ "809", "829", "849" ] ], [ "Ecuador", "ec", "593" ], [ "Egypt (‫مصر‬‎)", "eg", "20" ], [ "El Salvador", "sv", "503" ], [ "Equatorial Guinea (Guinea Ecuatorial)", "gq", "240" ], [ "Eritrea", "er", "291" ], [ "Estonia (Eesti)", "ee", "372" ], [ "Ethiopia", "et", "251" ], [ "Falkland Islands (Islas Malvinas)", "fk", "500" ], [ "Faroe Islands (Føroyar)", "fo", "298" ], [ "Fiji", "fj", "679" ], [ "Finland (Suomi)", "fi", "358", 0 ], [ "France", "fr", "33" ], [ "French Guiana (Guyane française)", "gf", "594" ], [ "French Polynesia (Polynésie française)", "pf", "689" ], [ "Gabon", "ga", "241" ], [ "Gambia", "gm", "220" ], [ "Georgia (საქართველო)", "ge", "995" ], [ "Germany (Deutschland)", "de", "49" ], [ "Ghana (Gaana)", "gh", "233" ], [ "Gibraltar", "gi", "350" ], [ "Greece (Ελλάδα)", "gr", "30" ], [ "Greenland (Kalaallit Nunaat)", "gl", "299" ], [ "Grenada", "gd", "1473" ], [ "Guadeloupe", "gp", "590", 0 ], [ "Guam", "gu", "1671" ], [ "Guatemala", "gt", "502" ], [ "Guernsey", "gg", "44", 1 ], [ "Guinée (Guinea)", "gn", "224" ], [ "Guinea-Bissau (Guiné Bissau)", "gw", "245" ], [ "Guyana", "gy", "592" ], [ "Haiti", "ht", "509" ], [ "Honduras", "hn", "504" ], [ "Hong Kong (香港)", "hk", "852" ], [ "Hungary (Magyarország)", "hu", "36" ], [ "Iceland (Ísland)", "is", "354" ], [ "India (भारत)", "in", "91" ], [ "Indonesia", "id", "62" ], [ "Iran (‫ایران‬‎)", "ir", "98" ], [ "Iraq (‫العراق‬‎)", "iq", "964" ], [ "Ireland", "ie", "353" ], [ "Isle of Man", "im", "44", 2 ], [ "Israel (‫ישראל‬‎)", "il", "972" ], [ "Italy (Italia)", "it", "39", 0 ], [ "Jamaica", "jm", "1", 4, [ "876", "658" ] ], [ "Japan (日本)", "jp", "81" ], [ "Jersey", "je", "44", 3 ], [ "Jordan (‫الأردن‬‎)", "jo", "962" ], [ "Kazakhstan (Казахстан)", "kz", "7", 1 ], [ "Kenya", "ke", "254" ], [ "Kiribati", "ki", "686" ], [ "Kosovo", "xk", "383" ], [ "Kuwait (‫الكويت‬‎)", "kw", "965" ], [ "Kyrgyzstan (Кыргызстан)", "kg", "996" ], [ "Laos (ລາວ)", "la", "856" ], [ "Latvia (Latvija)", "lv", "371" ], [ "Lebanon (‫لبنان‬‎)", "lb", "961" ], [ "Lesotho", "ls", "266" ], [ "Liberia", "lr", "231" ], [ "Libya (‫ليبيا‬‎)", "ly", "218" ], [ "Liechtenstein", "li", "423" ], [ "Lithuania (Lietuva)", "lt", "370" ], [ "Luxembourg", "lu", "352" ], [ "Macau (澳門)", "mo", "853" ], [ "Macedonia (FYROM) (Македонија)", "mk", "389" ], [ "Madagascar (Madagasikara)", "mg", "261" ], [ "Malawi", "mw", "265" ], [ "Malaysia", "my", "60" ], [ "Maldives", "mv", "960" ], [ "Mali", "ml", "223" ], [ "Malta", "mt", "356" ], [ "Maroc (‫المغرب‬‎)", "ma", "212", 0 ], [ "Marshall Islands", "mh", "692" ], [ "Martinique", "mq", "596" ], [ "Mauritanie (‫موريتانيا‬‎)", "mr", "222" ], [ "Mauritius (Moris)", "mu", "230" ], [ "Mayotte", "yt", "262", 1 ], [ "Mexico (México)", "mx", "52" ], [ "Micronesia", "fm", "691" ], [ "Moldova (Republica Moldova)", "md", "373" ], [ "Monaco", "mc", "377" ], [ "Mongolia (Монгол)", "mn", "976" ], [ "Montenegro (Crna Gora)", "me", "382" ], [ "Montserrat", "ms", "1664" ], [ "Mozambique (Moçambique)", "mz", "258" ], [ "Myanmar (Burma) (မြန်မာ)", "mm", "95" ], [ "Namibia (Namibië)", "na", "264" ], [ "Nauru", "nr", "674" ], [ "Nepal (नेपाल)", "np", "977" ], [ "Netherlands (Nederland)", "nl", "31" ], [ "New Caledonia (Nouvelle-Calédonie)", "nc", "687" ], [ "New Zealand", "nz", "64" ], [ "Nicaragua", "ni", "505" ], [ "Niger (Nijar)", "ne", "227" ], [ "Nigeria", "ng", "234" ], [ "Niue", "nu", "683" ], [ "Norfolk Island", "nf", "672" ], [ "North Korea (조선 민주주의 인민 공화국)", "kp", "850" ], [ "Northern Mariana Islands", "mp", "1670" ], [ "Norway (Norge)", "no", "47", 0 ], [ "Oman (‫عُمان‬‎)", "om", "968" ], [ "Pakistan (‫پاکستان‬‎)", "pk", "92" ], [ "Palau", "pw", "680" ], [ "Palestine (‫فلسطين‬‎)", "ps", "970" ], [ "Panama (Panamá)", "pa", "507" ], [ "Papua New Guinea", "pg", "675" ], [ "Paraguay", "py", "595" ], [ "Peru (Perú)", "pe", "51" ], [ "Philippines", "ph", "63" ], [ "Poland (Polska)", "pl", "48" ], [ "Portugal", "pt", "351" ], [ "Puerto Rico", "pr", "1", 3, [ "787", "939" ] ], [ "Qatar (‫قطر‬‎)", "qa", "974" ], [ "Réunion (La Réunion)", "re", "262", 0 ], [ "Romania (România)", "ro", "40" ], [ "Russia (Россия)", "ru", "7", 0 ], [ "Rwanda", "rw", "250" ], [ "Saint Barthélemy", "bl", "590", 1 ], [ "Saint Helena", "sh", "290" ], [ "Saint Kitts and Nevis", "kn", "1869" ], [ "Saint Lucia", "lc", "1758" ], [ "Saint Martin (Saint-Martin (partie française))", "mf", "590", 2 ], [ "Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)", "pm", "508" ], [ "Saint Vincent and the Grenadines", "vc", "1784" ], [ "Samoa", "ws", "685" ], [ "San Marino", "sm", "378" ], [ "São Tomé and Príncipe (São Tomé e Príncipe)", "st", "239" ], [ "Saudi Arabia (‫المملكة العربية السعودية‬‎)", "sa", "966" ], [ "Sénégal (Senegal)", "sn", "221" ], [ "Serbia (Србија)", "rs", "381" ], [ "Seychelles", "sc", "248" ], [ "Sierra Leone", "sl", "232" ], [ "Singapore", "sg", "65" ], [ "Sint Maarten", "sx", "1721" ], [ "Slovakia (Slovensko)", "sk", "421" ], [ "Slovenia (Slovenija)", "si", "386" ], [ "Solomon Islands", "sb", "677" ], [ "Somalia (Soomaaliya)", "so", "252" ], [ "South Africa", "za", "27" ], [ "South Korea (대한민국)", "kr", "82" ], [ "South Sudan (‫جنوب السودان‬‎)", "ss", "211" ], [ "Spain (España)", "es", "34" ], [ "Sri Lanka (ශ්‍රී ලංකාව)", "lk", "94" ], [ "Sudan (‫السودان‬‎)", "sd", "249" ], [ "Suriname", "sr", "597" ], [ "Svalbard and Jan Mayen", "sj", "47", 1 ], [ "Swaziland", "sz", "268" ], [ "Sweden (Sverige)", "se", "46" ], [ "Switzerland (Schweiz)", "ch", "41" ], [ "Syria (‫سوريا‬‎)", "sy", "963" ], [ "Taiwan (台灣)", "tw", "886" ], [ "Tajikistan", "tj", "992" ], [ "Tanzania", "tz", "255" ], [ "Thailand (ไทย)", "th", "66" ], [ "Timor-Leste", "tl", "670" ], [ "Togo", "tg", "228" ], [ "Tokelau", "tk", "690" ], [ "Tonga", "to", "676" ], [ "Trinidad and Tobago", "tt", "1868" ], [ "Tunisie (‫تونس‬‎)", "tn", "216" ], [ "Turkey (Türkiye)", "tr", "90" ], [ "Turkmenistan", "tm", "993" ], [ "Turks and Caicos Islands", "tc", "1649" ], [ "Tuvalu", "tv", "688" ], [ "U.S. Virgin Islands", "vi", "1340" ], [ "Uganda", "ug", "256" ], [ "Ukraine (Україна)", "ua", "380" ], [ "United Arab Emirates (‫الإمارات العربية المتحدة‬‎)", "ae", "971" ], [ "United Kingdom", "gb", "44", 0 ], [ "United States", "us", "1", 0 ], [ "Uruguay", "uy", "598" ], [ "Uzbekistan (Oʻzbekiston)", "uz", "998" ], [ "Vanuatu", "vu", "678" ], [ "Vatican City (Città del Vaticano)", "va", "39", 1 ], [ "Venezuela", "ve", "58" ], [ "Vietnam (Việt Nam)", "vn", "84" ], [ "Wallis and Futuna (Wallis-et-Futuna)", "wf", "681" ], [ "Western Sahara (‫الصحراء الغربية‬‎)", "eh", "212", 1 ], [ "Yemen (‫اليمن‬‎)", "ye", "967" ], [ "Zambia", "zm", "260" ], [ "Zimbabwe", "zw", "263" ], [ "Åland Islands", "ax", "358", 1 ] ];
        // loop over all of the countries above, restructuring the data to be objects with named keys
        for (var i = 0; i < allCountries.length; i++) {
            var c = allCountries[i];
            allCountries[i] = {
                name: c[0],
                iso2: c[1],
                dialCode: c[2],
                priority: c[3] || 0,
                areaCodes: c[4] || null
            };
        }
        "use strict";
        function _classCallCheck(instance, Constructor) {
            if (!(instance instanceof Constructor)) {
                throw new TypeError("Cannot call a class as a function");
            }
        }
        function _defineProperties(target, props) {
            for (var i = 0; i < props.length; i++) {
                var descriptor = props[i];
                descriptor.enumerable = descriptor.enumerable || false;
                descriptor.configurable = true;
                if ("value" in descriptor) descriptor.writable = true;
                Object.defineProperty(target, descriptor.key, descriptor);
            }
        }
        function _createClass(Constructor, protoProps, staticProps) {
            if (protoProps) _defineProperties(Constructor.prototype, protoProps);
            if (staticProps) _defineProperties(Constructor, staticProps);
            return Constructor;
        }
        window.intlTelInputGlobals = {
            instances: {}
        };
        // these vars persist through all instances of the plugin
        var id = 0;
        var defaults = {
            // whether or not to allow the dropdown
            allowDropdown: true,
            // if there is just a dial code in the input: remove it on blur, and re-add it on focus
            autoHideDialCode: true,
            // add a placeholder in the input with an example number for the selected country
            autoPlaceholder: "polite",
            // modify the auto placeholder
            customPlaceholder: null,
            // append menu to specified element
            dropdownContainer: null,
            // don't display these countries
            excludeCountries: [],
            // format the input value during initialisation and on setNumber
            formatOnDisplay: true,
            // geoIp lookup function
            geoIpLookup: null,
            // inject a hidden input with this name, and on submit, populate it with the result of getNumber
            hiddenInput: "",
            // initial country
            initialCountry: "",
            // localized country names e.g. { 'de': 'Deutschland' }
            localizedCountries: null,
            // don't insert international dial codes
            nationalMode: true,
            // display only these countries
            onlyCountries: [],
            // number type to use for placeholders
            placeholderNumberType: "MOBILE",
            // the countries at the top of the list. defaults to united states and united kingdom
            preferredCountries: [ "us", "gb" ],
            // display the country dial code next to the selected flag so it's not part of the typed number
            separateDialCode: false,
            // specify the path to the libphonenumber script to enable validation/formatting
            utilsScript: ""
        };
        // https://en.wikipedia.org/wiki/List_of_North_American_Numbering_Plan_area_codes#Non-geographic_area_codes
        var regionlessNanpNumbers = [ "800", "822", "833", "844", "855", "866", "877", "880", "881", "882", "883", "884", "885", "886", "887", "888", "889" ];
        // keep track of if the window.load event has fired as impossible to check after the fact
        window.addEventListener("load", function() {
            // UPDATE: use a public static field so we can fudge it in the tests
            window.intlTelInputGlobals.windowLoaded = true;
        });
        // utility function to iterate over an object. can't use Object.entries or native forEach because
        // of IE11
        var forEachProp = function forEachProp(obj, callback) {
            var keys = Object.keys(obj);
            for (var i = 0; i < keys.length; i++) {
                callback(keys[i], obj[keys[i]]);
            }
        };
        // run a method on each instance of the plugin
        var forEachInstance = function forEachInstance(method) {
            forEachProp(window.intlTelInputGlobals.instances, function(key) {
                window.intlTelInputGlobals.instances[key][method]();
            });
        };
        // this is our plugin class that we will create an instance of
        // eslint-disable-next-line no-unused-vars
        var Iti = /*#__PURE__*/
        function() {
            function Iti(input, options) {
                var _this = this;
                _classCallCheck(this, Iti);
                this.id = id++;
                this.telInput = input;
                this.activeItem = null;
                this.highlightedItem = null;
                // process specified options / defaults
                // alternative to Object.assign, which isn't supported by IE11
                var customOptions = options || {};
                this.options = {};
                forEachProp(defaults, function(key, value) {
                    _this.options[key] = customOptions.hasOwnProperty(key) ? customOptions[key] : value;
                });

                if (this.hadInitialPlaceholder) {
                    this.hadInitialPlaceholder = Boolean(input?.getAttribute("placeholder"));
                }
            }
            _createClass(Iti, [ {
                key: "_init",
                value: function _init() {
                    var _this2 = this;
                    // if in nationalMode, disable options relating to dial codes
                    if (this.options.nationalMode) this.options.autoHideDialCode = false;
                    // if separateDialCode then doesn't make sense to A) insert dial code into input
                    // (autoHideDialCode), and B) display national numbers (because we're displaying the country
                    // dial code next to them)
                    if (this.options.separateDialCode) {
                        this.options.autoHideDialCode = this.options.nationalMode = false;
                    }
                    // we cannot just test screen size as some smartphones/website meta tags will report desktop
                    // resolutions
                    // Note: for some reason jasmine breaks if you put this in the main Plugin function with the
                    // rest of these declarations
                    // Note: to target Android Mobiles (and not Tablets), we must find 'Android' and 'Mobile'
                    this.isMobile = /Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                    if (this.isMobile) {
                        // trigger the mobile dropdown css
                        document.body.classList.add("iti-mobile");
                        // on mobile, we want a full screen dropdown, so we must append it to the body
                        if (!this.options.dropdownContainer) this.options.dropdownContainer = document.body;
                    }
                    // these promises get resolved when their individual requests complete
                    // this way the dev can do something like iti.promise.then(...) to know when all requests are
                    // complete
                    if (typeof Promise !== "undefined") {
                        var autoCountryPromise = new Promise(function(resolve, reject) {
                            _this2.resolveAutoCountryPromise = resolve;
                            _this2.rejectAutoCountryPromise = reject;
                        });
                        var utilsScriptPromise = new Promise(function(resolve, reject) {
                            _this2.resolveUtilsScriptPromise = resolve;
                            _this2.rejectUtilsScriptPromise = reject;
                        });
                        this.promise = Promise.all([ autoCountryPromise, utilsScriptPromise ]);
                    } else {
                        // prevent errors when Promise doesn't exist
                        this.resolveAutoCountryPromise = this.rejectAutoCountryPromise = function() {};
                        this.resolveUtilsScriptPromise = this.rejectUtilsScriptPromise = function() {};
                    }
                    // in various situations there could be no country selected initially, but we need to be able
                    // to assume this variable exists
                    this.selectedCountryData = {};
                    // process all the data: onlyCountries, excludeCountries, preferredCountries etc
                    this._processCountryData();
                    // generate the markup
                    this._generateMarkup();
                    // set the initial state of the input value and the selected flag
                    this._setInitialState();
                    // start all of the event listeners: autoHideDialCode, input keydown, selectedFlag click
                    this._initListeners();
                    // utils script, and auto country
                    this._initRequests();
                }
            }, {
                key: "_processCountryData",
                value: function _processCountryData() {
                    // process onlyCountries or excludeCountries array if present
                    this._processAllCountries();
                    // process the countryCodes map
                    this._processCountryCodes();
                    // process the preferredCountries
                    this._processPreferredCountries();
                    // translate countries according to localizedCountries option
                    if (this.options.localizedCountries) this._translateCountriesByLocale();
                    // sort countries by name
                    if (this.options.onlyCountries.length || this.options.localizedCountries) {
                        this.countries.sort(this._countryNameSort);
                    }
                }
            }, {
                key: "_addCountryCode",
                value: function _addCountryCode(iso2, dialCode, priority) {
                    if (!this.countryCodes.hasOwnProperty(dialCode)) {
                        this.countryCodes[dialCode] = [];
                    }
                    var index = priority || 0;
                    this.countryCodes[dialCode][index] = iso2;
                }
            }, {
                key: "_processAllCountries",
                value: function _processAllCountries() {
                    if (this.options.onlyCountries.length) {
                        var lowerCaseOnlyCountries = this.options.onlyCountries.map(function(country) {
                            return country.toLowerCase();
                        });
                        this.countries = allCountries.filter(function(country) {
                            return lowerCaseOnlyCountries.indexOf(country.iso2) > -1;
                        });
                    } else if (this.options.excludeCountries.length) {
                        var lowerCaseExcludeCountries = this.options.excludeCountries.map(function(country) {
                            return country.toLowerCase();
                        });
                        this.countries = allCountries.filter(function(country) {
                            return lowerCaseExcludeCountries.indexOf(country.iso2) === -1;
                        });
                    } else {
                        this.countries = allCountries;
                    }
                }
            }, {
                key: "_translateCountriesByLocale",
                value: function _translateCountriesByLocale() {
                    for (var i = 0; i < this.countries.length; i++) {
                        var iso = this.countries[i].iso2.toLowerCase();
                        if (this.options.localizedCountries.hasOwnProperty(iso)) {
                            this.countries[i].name = this.options.localizedCountries[iso];
                        }
                    }
                }
            }, {
                key: "_countryNameSort",
                value: function _countryNameSort(a, b) {
                    return a.name.localeCompare(b.name);
                }
            }, {
                key: "_processCountryCodes",
                value: function _processCountryCodes() {
                    this.countryCodes = {};
                    for (var i = 0; i < this.countries.length; i++) {
                        var c = this.countries[i];
                        this._addCountryCode(c.iso2, c.dialCode, c.priority);
                        // area codes
                        if (c.areaCodes) {
                            for (var j = 0; j < c.areaCodes.length; j++) {
                                // full dial code is country code + dial code
                                this._addCountryCode(c.iso2, c.dialCode + c.areaCodes[j]);
                            }
                        }
                    }
                }
            }, {
                key: "_processPreferredCountries",
                value: function _processPreferredCountries() {
                    this.preferredCountries = [];
                    for (var i = 0; i < this.options.preferredCountries.length; i++) {
                        var countryCode = this.options.preferredCountries[i].toLowerCase();
                        var countryData = this._getCountryData(countryCode, false, true);
                        if (countryData) this.preferredCountries.push(countryData);
                    }
                }
            }, {
                key: "_createEl",
                value: function _createEl(name, attrs, container) {
                    var el = document.createElement(name);
                    if (attrs) forEachProp(attrs, function(key, value) {
                        return el.setAttribute(key, value);
                    });
                    if (container) container.appendChild(el);
                    return el;
                }
            }, {
                key: "_generateMarkup",
                value: function _generateMarkup() {
                    // prevent autocomplete as there's no safe, cross-browser event we can react to, so it can
                    // easily put the plugin in an inconsistent state e.g. the wrong flag selected for the
                    // autocompleted number, which on submit could mean wrong number is saved (esp in nationalMode)
                    this.telInput.setAttribute("autocomplete", "off");
                    // containers (mostly for positioning)
                    var parentClass = "intl-tel-input";
                    if (this.options.allowDropdown) parentClass += " allow-dropdown";
                    if (this.options.separateDialCode) parentClass += " separate-dial-code";
                    var wrapper = this._createEl("div", {
                        "class": parentClass
                    });
                    this.telInput.parentNode.insertBefore(wrapper, this.telInput);
                    this.flagsContainer = this._createEl("div", {
                        "class": "flag-container"
                    }, wrapper);
                    wrapper.appendChild(this.telInput);
                    // selected flag (displayed to left of input)
                    this.selectedFlag = this._createEl("div", {
                        "class": "selected-flag",
                        role: "combobox",
                        "aria-owns": "country-listbox"
                    }, this.flagsContainer);
                    this.selectedFlagInner = this._createEl("div", {
                        "class": "iti-flag"
                    }, this.selectedFlag);
                    if (this.options.separateDialCode) {
                        this.selectedDialCode = this._createEl("div", {
                            "class": "selected-dial-code"
                        }, this.selectedFlag);
                    }
                    if (this.options.allowDropdown) {
                        // make element focusable and tab navigable
                        this.selectedFlag.setAttribute("tabindex", "0");
                        this.dropdownArrow = this._createEl("div", {
                            "class": "iti-arrow"
                        }, this.selectedFlag);
                        // country dropdown: preferred countries, then divider, then all countries
                        this.countryList = this._createEl("ul", {
                            "class": "country-list hide",
                            id: "country-listbox",
                            "aria-expanded": "false",
                            role: "listbox"
                        });
                        if (this.preferredCountries.length) {
                            this._appendListItems(this.preferredCountries, "preferred");
                            this._createEl("li", {
                                "class": "divider",
                                role: "separator",
                                "aria-disabled": "true"
                            }, this.countryList);
                        }
                        this._appendListItems(this.countries, "standard");
                        // create dropdownContainer markup
                        if (this.options.dropdownContainer) {
                            this.dropdown = this._createEl("div", {
                                "class": "intl-tel-input iti-container"
                            });
                            this.dropdown.appendChild(this.countryList);
                        } else {
                            this.flagsContainer.appendChild(this.countryList);
                        }
                    }
                    if (this.options.hiddenInput) {
                        var hiddenInputName = this.options.hiddenInput;
                        var name = this.telInput.getAttribute("name");
                        if (name) {
                            var i = name.lastIndexOf("[");
                            // if input name contains square brackets, then give the hidden input the same name,
                            // replacing the contents of the last set of brackets with the given hiddenInput name
                            if (i !== -1) hiddenInputName = "".concat(name.substr(0, i), "[").concat(hiddenInputName, "]");
                        }
                        this.hiddenInput = this._createEl("input", {
                            type: "hidden",
                            name: hiddenInputName
                        });
                        wrapper.appendChild(this.hiddenInput);
                    }
                }
            }, {
                key: "_appendListItems",
                value: function _appendListItems(countries, className) {
                    // we create so many DOM elements, it is faster to build a temp string
                    // and then add everything to the DOM in one go at the end
                    var tmp = "";
                    // for each country
                    for (var i = 0; i < countries.length; i++) {
                        var c = countries[i];
                        // open the list item
                        tmp += "<li class='country ".concat(className, "' id='iti-item-").concat(c.iso2, "' role='option' data-dial-code='").concat(c.dialCode, "' data-country-code='").concat(c.iso2, "'>");
                        // add the flag
                        tmp += "<div class='flag-box'><div class='iti-flag ".concat(c.iso2, "'></div></div>");
                        // and the country name and dial code
                        tmp += "<span class='country-name'>".concat(c.name, "</span>");
                        tmp += "<span class='dial-code'>+".concat(c.dialCode, "</span>");
                        // close the list item
                        tmp += "</li>";
                    }
                    this.countryList.insertAdjacentHTML("beforeend", tmp);
                }
            }, {
                key: "_setInitialState",
                value: function _setInitialState() {
                    var val = this.telInput.value;
                    var dialCode = this._getDialCode(val);
                    var isRegionlessNanp = this._isRegionlessNanp(val);
                    var _this$options = this.options, initialCountry = _this$options.initialCountry, nationalMode = _this$options.nationalMode, autoHideDialCode = _this$options.autoHideDialCode, separateDialCode = _this$options.separateDialCode;
                    // if we already have a dial code, and it's not a regionlessNanp, we can go ahead and set the
                    // flag, else fall back to the default country
                    if (dialCode && !isRegionlessNanp) {
                        this._updateFlagFromNumber(val);
                    } else if (initialCountry !== "auto") {
                        // see if we should select a flag
                        if (initialCountry) {
                            this._setFlag(initialCountry.toLowerCase());
                        } else {
                            if (dialCode && isRegionlessNanp) {
                                // has intl dial code, is regionless nanp, and no initialCountry, so default to US
                                this._setFlag("us");
                            } else {
                                // no dial code and no initialCountry, so default to first in list
                                this.defaultCountry = this.preferredCountries.length ? this.preferredCountries[0].iso2 : this.countries[0].iso2;
                                if (!val) {
                                    this._setFlag(this.defaultCountry);
                                }
                            }
                        }
                        // if empty and no nationalMode and no autoHideDialCode then insert the default dial code
                        if (!val && !nationalMode && !autoHideDialCode && !separateDialCode) {
                            this.telInput.value = "+".concat(this.selectedCountryData.dialCode);
                        }
                    }
                    // NOTE: if initialCountry is set to auto, that will be handled separately
                    // format - note this wont be run after _updateDialCode as that's only called if no val
                    if (val) this._updateValFromNumber(val);
                }
            }, {
                key: "_initListeners",
                value: function _initListeners() {
                    this._initKeyListeners();
                    if (this.options.autoHideDialCode) this._initFocusListeners();
                    if (this.options.allowDropdown) this._initDropdownListeners();
                    if (this.hiddenInput) this._initHiddenInputListener();
                }
            }, {
                key: "_initHiddenInputListener",
                value: function _initHiddenInputListener() {
                    var _this3 = this;
                    this._handleHiddenInputSubmit = function() {
                        _this3.hiddenInput.value = _this3.getNumber();
                    };
                    if (this.telInput.form) this.telInput.form.addEventListener("submit", this._handleHiddenInputSubmit);
                }
            }, {
                key: "_getClosestLabel",
                value: function _getClosestLabel() {
                    var el = this.telInput;
                    while (el && el.tagName !== "LABEL") {
                        el = el.parentNode;
                    }
                    return el;
                }
            }, {
                key: "_initDropdownListeners",
                value: function _initDropdownListeners() {
                    var _this4 = this;
                    // hack for input nested inside label (which is valid markup): clicking the selected-flag to
                    // open the dropdown would then automatically trigger a 2nd click on the input which would
                    // close it again
                    this._handleLabelClick = function(e) {
                        // if the dropdown is closed, then focus the input, else ignore the click
                        if (_this4.countryList.classList.contains("hide")) _this4.telInput.focus(); else e.preventDefault();
                    };
                    var label = this._getClosestLabel();
                    if (label) label.addEventListener("click", this._handleLabelClick);
                    // toggle country dropdown on click
                    this._handleClickSelectedFlag = function() {
                        // only intercept this event if we're opening the dropdown
                        // else let it bubble up to the top ("click-off-to-close" listener)
                        // we cannot just stopPropagation as it may be needed to close another instance
                        if (_this4.countryList.classList.contains("hide") && !_this4.telInput.disabled && !_this4.telInput.readOnly) {
                            _this4._showDropdown();
                        }
                    };
                    this.selectedFlag.addEventListener("click", this._handleClickSelectedFlag);
                    // open dropdown list if currently focused
                    this._handleFlagsContainerKeydown = function(e) {
                        var isDropdownHidden = _this4.countryList.classList.contains("hide");
                        if (isDropdownHidden && [ "ArrowUp", "ArrowDown", " ", "Enter" ].indexOf(e.key) !== -1) {
                            // prevent form from being submitted if "ENTER" was pressed
                            e.preventDefault();
                            // prevent event from being handled again by document
                            e.stopPropagation();
                            _this4._showDropdown();
                        }
                        // allow navigation from dropdown to input on TAB
                        if (e.key === "Tab") _this4._closeDropdown();
                    };
                    this.flagsContainer.addEventListener("keydown", this._handleFlagsContainerKeydown);
                }
            }, {
                key: "_initRequests",
                value: function _initRequests() {
                    var _this5 = this;
                    // if the user has specified the path to the utils script, fetch it on window.load, else resolve
                    if (this.options.utilsScript && !window.intlTelInputUtils) {
                        // if the plugin is being initialised after the window.load event has already been fired
                        if (window.intlTelInputGlobals.windowLoaded) {
                            window.intlTelInputGlobals.loadUtils(this.options.utilsScript);
                        } else {
                            // wait until the load event so we don't block any other requests e.g. the flags image
                            window.addEventListener("load", function() {
                                window.intlTelInputGlobals.loadUtils(_this5.options.utilsScript);
                            });
                        }
                    } else this.resolveUtilsScriptPromise();
                    if (this.options.initialCountry === "auto") this._loadAutoCountry(); else this.resolveAutoCountryPromise();
                }
            }, {
                key: "_loadAutoCountry",
                value: function _loadAutoCountry() {
                    // 3 options:
                    // 1) already loaded (we're done)
                    // 2) not already started loading (start)
                    // 3) already started loading (do nothing - just wait for loading callback to fire)
                    if (window.intlTelInputGlobals.autoCountry) {
                        this.handleAutoCountry();
                    } else if (!window.intlTelInputGlobals.startedLoadingAutoCountry) {
                        // don't do this twice!
                        window.intlTelInputGlobals.startedLoadingAutoCountry = true;
                        if (typeof this.options.geoIpLookup === "function") {
                            this.options.geoIpLookup(function(countryCode) {
                                window.intlTelInputGlobals.autoCountry = countryCode.toLowerCase();
                                // tell all instances the auto country is ready
                                // TODO: this should just be the current instances
                                // UPDATE: use setTimeout in case their geoIpLookup function calls this callback straight
                                // away (e.g. if they have already done the geo ip lookup somewhere else). Using
                                // setTimeout means that the current thread of execution will finish before executing
                                // this, which allows the plugin to finish initialising.
                                setTimeout(function() {
                                    return forEachInstance("handleAutoCountry");
                                });
                            }, function() {
                                return forEachInstance("rejectAutoCountryPromise");
                            });
                        }
                    }
                }
            }, {
                key: "_initKeyListeners",
                value: function _initKeyListeners() {
                    var _this6 = this;
                    // update flag on keyup
                    this._handleKeyupEvent = function() {
                        if (_this6._updateFlagFromNumber(_this6.telInput.value)) {
                            _this6._triggerCountryChange();
                        }
                    };
                    this.telInput.addEventListener("keyup", this._handleKeyupEvent);
                    // update flag on cut/paste events (now supported in all major browsers)
                    this._handleClipboardEvent = function() {
                        // hack because "paste" event is fired before input is updated
                        setTimeout(_this6._handleKeyupEvent);
                    };
                    this.telInput.addEventListener("cut", this._handleClipboardEvent);
                    this.telInput.addEventListener("paste", this._handleClipboardEvent);
                }
            }, {
                key: "_cap",
                value: function _cap(number) {
                    var max = this.telInput.getAttribute("maxlength");
                    return max && number.length > max ? number.substr(0, max) : number;
                }
            }, {
                key: "_initFocusListeners",
                value: function _initFocusListeners() {
                    var _this7 = this;
                    // mousedown decides where the cursor goes, so if we're focusing we must preventDefault as
                    // we'll be inserting the dial code, and we want the cursor to be at the end no matter where
                    // they click
                    this._handleMousedownFocusEvent = function(e) {
                        if (_this7.telInput !== document.activeElement && !_this7.telInput.value) {
                            e.preventDefault();
                            // but this also cancels the focus, so we must trigger that manually
                            _this7.telInput.focus();
                        }
                    };
                    this.telInput.addEventListener("mousedown", this._handleMousedownFocusEvent);
                    this._handleKeypressPlusEvent = function(e) {
                        if (e.key === "+") _this7.telInput.value = "";
                    };
                    // on focus: if empty, insert the dial code for the currently selected flag
                    this._handleFocusEvent = function() {
                        if (!_this7.telInput.value && !_this7.telInput.readOnly && _this7.selectedCountryData.dialCode) {
                            // insert the dial code
                            _this7.telInput.value = "+".concat(_this7.selectedCountryData.dialCode);
                            // after auto-inserting a dial code, if the first key they hit is '+' then assume they are
                            // entering a new number, so remove the dial code. use keypress instead of keydown because
                            // keydown gets triggered for the shift key (required to hit the + key), and instead of
                            // keyup because that shows the new '+' before removing the old one
                            _this7.telInput.addEventListener("keypress", _this7._handleKeypressPlusEvent);
                            // after tabbing in, make sure the cursor is at the end we must use setTimeout to get
                            // outside of the focus handler as it seems the selection happens after that
                            setTimeout(function() {
                                var len = _this7.telInput.value.length;
                                _this7.telInput.setSelectionRange(len, len);
                            });
                        }
                    };
                    this.telInput.addEventListener("focus", this._handleFocusEvent);
                    // on blur or form submit: if just a dial code then remove it
                    this._handleSubmitOrBlurEvent = function() {
                        _this7._removeEmptyDialCode();
                    };
                    if (this.telInput.form) this.telInput.form.addEventListener("submit", this._handleSubmitOrBlurEvent);
                    this.telInput.addEventListener("blur", this._handleSubmitOrBlurEvent);
                }
            }, {
                key: "_removeEmptyDialCode",
                value: function _removeEmptyDialCode() {
                    var startsPlus = this.telInput.value.charAt(0) === "+";
                    if (startsPlus) {
                        var numeric = this._getNumeric(this.telInput.value);
                        // if just a plus, or if just a dial code
                        if (!numeric || this.selectedCountryData.dialCode === numeric) {
                            this.telInput.value = "";
                        }
                    }
                    // remove the keypress listener we added on focus
                    this.telInput.removeEventListener("keypress", this._handleKeypressPlusEvent);
                }
            }, {
                key: "_getNumeric",
                value: function _getNumeric(s) {
                    return s.replace(/\D/g, "");
                }
            }, {
                key: "_trigger",
                value: function _trigger(name) {
                    // have to use old school document.createEvent as IE11 doesn't support `new Event()` syntax
                    var e = document.createEvent("Event");
                    e.initEvent(name, true, true);
                    // can bubble, and is cancellable
                    this.telInput.dispatchEvent(e);
                }
            }, {
                key: "_showDropdown",
                value: function _showDropdown() {
                    this.countryList.classList.remove("hide");
                    this.countryList.setAttribute("aria-expanded", "true");
                    this._setDropdownPosition();
                    // update highlighting and scroll to active list item
                    if (this.activeItem) {
                        this._highlightListItem(this.activeItem);
                        this._scrollTo(this.activeItem);
                    }
                    // bind all the dropdown-related listeners: mouseover, click, click-off, keydown
                    this._bindDropdownListeners();
                    // update the arrow
                    this.dropdownArrow.classList.add("up");
                    this._trigger("open:countrydropdown");
                }
            }, {
                key: "_toggleClass",
                value: function _toggleClass(el, className, shouldHaveClass) {
                    if (shouldHaveClass && !el.classList.contains(className)) el.classList.add(className); else if (!shouldHaveClass && el.classList.contains(className)) el.classList.remove(className);
                }
            }, {
                key: "_setDropdownPosition",
                value: function _setDropdownPosition() {
                    var _this8 = this;
                    if (this.options.dropdownContainer) {
                        this.options.dropdownContainer.appendChild(this.dropdown);
                    }
                    if (!this.isMobile) {
                        var pos = this.telInput.getBoundingClientRect();
                        // windowTop from https://stackoverflow.com/a/14384091/217866
                        var windowTop = window.pageYOffset || document.documentElement.scrollTop;
                        var inputTop = pos.top + windowTop;
                        var dropdownHeight = this.countryList.offsetHeight;
                        // dropdownFitsBelow = (dropdownBottom < windowBottom)
                        var dropdownFitsBelow = inputTop + this.telInput.offsetHeight + dropdownHeight < windowTop + window.innerHeight;
                        var dropdownFitsAbove = inputTop - dropdownHeight > windowTop;
                        // by default, the dropdown will be below the input. If we want to position it above the
                        // input, we add the dropup class.
                        this._toggleClass(this.countryList, "dropup", !dropdownFitsBelow && dropdownFitsAbove);
                        // if dropdownContainer is enabled, calculate postion
                        if (this.options.dropdownContainer) {
                            // by default the dropdown will be directly over the input because it's not in the flow.
                            // If we want to position it below, we need to add some extra top value.
                            var extraTop = !dropdownFitsBelow && dropdownFitsAbove ? 0 : this.telInput.offsetHeight;
                            // calculate placement
                            this.dropdown.style.top = "".concat(inputTop + extraTop, "px");
                            this.dropdown.style.left = "".concat(pos.left + document.body.scrollLeft, "px");
                            // close menu on window scroll
                            this._handleWindowScroll = function() {
                                return _this8._closeDropdown();
                            };
                            window.addEventListener("scroll", this._handleWindowScroll);
                        }
                    }
                }
            }, {
                key: "_getClosestListItem",
                value: function _getClosestListItem(target) {
                    var el = target;
                    while (el && el !== this.countryList && !el.classList.contains("country")) {
                        el = el.parentNode;
                    }
                    // if we reached the countryList element, then return null
                    return el === this.countryList ? null : el;
                }
            }, {
                key: "_bindDropdownListeners",
                value: function _bindDropdownListeners() {
                    var _this9 = this;
                    // when mouse over a list item, just highlight that one
                    // we add the class "highlight", so if they hit "enter" we know which one to select
                    this._handleMouseoverCountryList = function(e) {
                        // handle event delegation, as we're listening for this event on the countryList
                        var listItem = _this9._getClosestListItem(e.target);
                        if (listItem) _this9._highlightListItem(listItem);
                    };
                    this.countryList.addEventListener("mouseover", this._handleMouseoverCountryList);
                    // listen for country selection
                    this._handleClickCountryList = function(e) {
                        var listItem = _this9._getClosestListItem(e.target);
                        if (listItem) _this9._selectListItem(listItem);
                    };
                    this.countryList.addEventListener("click", this._handleClickCountryList);
                    // click off to close
                    // (except when this initial opening click is bubbling up)
                    // we cannot just stopPropagation as it may be needed to close another instance
                    var isOpening = true;
                    this._handleClickOffToClose = function() {
                        if (!isOpening) _this9._closeDropdown();
                        isOpening = false;
                    };
                    document.documentElement.addEventListener("click", this._handleClickOffToClose);
                    // listen for up/down scrolling, enter to select, or letters to jump to country name.
                    // use keydown as keypress doesn't fire for non-char keys and we want to catch if they
                    // just hit down and hold it to scroll down (no keyup event).
                    // listen on the document because that's where key events are triggered if no input has focus
                    var query = "";
                    var queryTimer = null;
                    this._handleKeydownOnDropdown = function(e) {
                        // prevent down key from scrolling the whole page,
                        // and enter key from submitting a form etc
                        e.preventDefault();
                        // up and down to navigate
                        if (e.key === "ArrowUp" || e.key === "ArrowDown") _this9._handleUpDownKey(e.key); else if (e.key === "Enter") _this9._handleEnterKey(); else if (e.key === "Escape") _this9._closeDropdown(); else if (/^[a-zA-ZÀ-ÿ ]$/.test(e.key)) {
                            // jump to countries that start with the query string
                            if (queryTimer) clearTimeout(queryTimer);
                            query += e.key.toLowerCase();
                            _this9._searchForCountry(query);
                            // if the timer hits 1 second, reset the query
                            queryTimer = setTimeout(function() {
                                query = "";
                            }, 1e3);
                        }
                    };
                    document.addEventListener("keydown", this._handleKeydownOnDropdown);
                }
            }, {
                key: "_handleUpDownKey",
                value: function _handleUpDownKey(key) {
                    var next = key === "ArrowUp" ? this.highlightedItem.previousElementSibling : this.highlightedItem.nextElementSibling;
                    if (next) {
                        // skip the divider
                        if (next.classList.contains("divider")) {
                            next = key === "ArrowUp" ? next.previousElementSibling : next.nextElementSibling;
                        }
                        this._highlightListItem(next);
                        this._scrollTo(next);
                    }
                }
            }, {
                key: "_handleEnterKey",
                value: function _handleEnterKey() {
                    if (this.highlightedItem) this._selectListItem(this.highlightedItem);
                }
            }, {
                key: "_searchForCountry",
                value: function _searchForCountry(query) {
                    for (var i = 0; i < this.countries.length; i++) {
                        if (this._startsWith(this.countries[i].name, query)) {
                            var listItem = this.countryList.querySelector("#iti-item-".concat(this.countries[i].iso2));
                            // update highlighting and scroll
                            this._highlightListItem(listItem);
                            this._scrollTo(listItem, true);
                            break;
                        }
                    }
                }
            }, {
                key: "_startsWith",
                value: function _startsWith(a, b) {
                    return a.substr(0, b.length).toLowerCase() === b;
                }
            }, {
                key: "_updateValFromNumber",
                value: function _updateValFromNumber(originalNumber) {
                    var number = originalNumber;
                    if (this.options.formatOnDisplay && window.intlTelInputUtils && this.selectedCountryData) {
                        var useNational = !this.options.separateDialCode && (this.options.nationalMode || number.charAt(0) !== "+");
                        var _intlTelInputUtils$nu = intlTelInputUtils.numberFormat, NATIONAL = _intlTelInputUtils$nu.NATIONAL, INTERNATIONAL = _intlTelInputUtils$nu.INTERNATIONAL;
                        var format = useNational ? NATIONAL : INTERNATIONAL;
                        number = intlTelInputUtils.formatNumber(number, this.selectedCountryData.iso2, format);
                    }
                    number = this._beforeSetNumber(number);
                    this.telInput.value = number;
                }
            }, {
                key: "_updateFlagFromNumber",
                value: function _updateFlagFromNumber(originalNumber) {
                    // if we're in nationalMode and we already have US/Canada selected, make sure the number starts
                    // with a +1 so _getDialCode will be able to extract the area code
                    // update: if we dont yet have selectedCountryData, but we're here (trying to update the flag
                    // from the number), that means we're initialising the plugin with a number that already has a
                    // dial code, so fine to ignore this bit
                    var number = originalNumber;
                    var isNanp = this.selectedCountryData.dialCode === "1";
                    if (number && this.options.nationalMode && isNanp && number.charAt(0) !== "+") {
                        if (number.charAt(0) !== "1") number = "1".concat(number);
                        number = "+".concat(number);
                    }
                    // try and extract valid dial code from input
                    var dialCode = this._getDialCode(number);
                    var numeric = this._getNumeric(number);
                    var countryCode = null;
                    if (dialCode) {
                        // check if one of the matching countries is already selected
                        var countryCodes = this.countryCodes[this._getNumeric(dialCode)];
                        var alreadySelected = countryCodes.indexOf(this.selectedCountryData.iso2) !== -1;
                        // check if the given number contains a NANP area code i.e. the only dialCode that could be
                        // extracted was +1 (instead of say +1204) and the actual number's length is >=4
                        var isNanpAreaCode = dialCode === "+1" && numeric.length >= 4;
                        var isRegionlessNanpNumber = this.selectedCountryData.dialCode === "1" && this._isRegionlessNanp(numeric);
                        // only update the flag if:
                        // A) NOT (we currently have a NANP flag selected, and the number is a regionlessNanp)
                        // AND
                        // B) either a matching country is not already selected OR the number contains a NANP area
                        // code (ensure the flag is set to the first matching country)
                        if (!isRegionlessNanpNumber && (!alreadySelected || isNanpAreaCode)) {
                            // if using onlyCountries option, countryCodes[0] may be empty, so we must find the first
                            // non-empty index
                            for (var j = 0; j < countryCodes.length; j++) {
                                if (countryCodes[j]) {
                                    countryCode = countryCodes[j];
                                    break;
                                }
                            }
                        }
                    } else if (number.charAt(0) === "+" && numeric.length) {
                        // invalid dial code, so empty
                        // Note: use getNumeric here because the number has not been formatted yet, so could contain
                        // bad chars
                        countryCode = "";
                    } else if (!number || number === "+") {
                        // empty, or just a plus, so default
                        countryCode = this.defaultCountry;
                    }
                    if (countryCode !== null) {
                        return this._setFlag(countryCode);
                    }
                    return false;
                }
            }, {
                key: "_isRegionlessNanp",
                value: function _isRegionlessNanp(number) {
                    var numeric = this._getNumeric(number);
                    if (numeric.charAt(0) === "1") {
                        var areaCode = numeric.substr(1, 3);
                        return regionlessNanpNumbers.indexOf(areaCode) !== -1;
                    }
                    return false;
                }
            }, {
                key: "_highlightListItem",
                value: function _highlightListItem(listItem) {
                    var prevItem = this.highlightedItem;
                    if (prevItem) prevItem.classList.remove("highlight");
                    this.highlightedItem = listItem;
                    this.highlightedItem.classList.add("highlight");
                }
            }, {
                key: "_getCountryData",
                value: function _getCountryData(countryCode, ignoreOnlyCountriesOption, allowFail) {
                    var countryList = ignoreOnlyCountriesOption ? allCountries : this.countries;
                    for (var i = 0; i < countryList.length; i++) {
                        if (countryList[i].iso2 === countryCode) {
                            return countryList[i];
                        }
                    }
                    if (allowFail) {
                        return null;
                    }
                    throw new Error("No country data for '".concat(countryCode, "'"));
                }
            }, {
                key: "_setFlag",
                value: function _setFlag(countryCode) {
                    var prevCountry = this.selectedCountryData.iso2 ? this.selectedCountryData : {};
                    // do this first as it will throw an error and stop if countryCode is invalid
                    this.selectedCountryData = countryCode ? this._getCountryData(countryCode, false, false) : {};
                    // update the defaultCountry - we only need the iso2 from now on, so just store that
                    if (this.selectedCountryData.iso2) {
                        this.defaultCountry = this.selectedCountryData.iso2;
                    }
                    this.selectedFlagInner.setAttribute("class", "iti-flag ".concat(countryCode));
                    // update the selected country's title attribute
                    var title = countryCode ? "".concat(this.selectedCountryData.name, ": +").concat(this.selectedCountryData.dialCode) : "Unknown";
                    this.selectedFlag.setAttribute("title", title);
                    if (this.options.separateDialCode) {
                        var dialCode = this.selectedCountryData.dialCode ? "+".concat(this.selectedCountryData.dialCode) : "";
                        var parent = this.telInput.parentNode;
                        if (prevCountry.dialCode) {
                            parent.classList.remove("iti-sdc-".concat(prevCountry.dialCode.length + 1));
                        }
                        if (dialCode) {
                            parent.classList.add("iti-sdc-".concat(dialCode.length));
                        }
                        this.selectedDialCode.innerHTML = dialCode;
                    }
                    // and the input's placeholder
                    this._updatePlaceholder();
                    // update the active list item
                    if (this.options.allowDropdown) {
                        var prevItem = this.activeItem;
                        if (prevItem) {
                            prevItem.classList.remove("active");
                            prevItem.setAttribute("aria-selected", "false");
                        }
                        if (countryCode) {
                            var nextItem = this.countryList.querySelector("#iti-item-".concat(countryCode));
                            nextItem.setAttribute("aria-selected", "true");
                            nextItem.classList.add("active");
                            this.activeItem = nextItem;
                            this.countryList.setAttribute("aria-activedescendant", nextItem.getAttribute("id"));
                        }
                    }
                    // return if the flag has changed or not
                    return prevCountry.iso2 !== countryCode;
                }
            }, {
                key: "_updatePlaceholder",
                value: function _updatePlaceholder() {
                    var shouldSetPlaceholder = this.options.autoPlaceholder === "aggressive" || !this.hadInitialPlaceholder && this.options.autoPlaceholder === "polite";
                    if (window.intlTelInputUtils && shouldSetPlaceholder) {
                        var numberType = intlTelInputUtils.numberType[this.options.placeholderNumberType];
                        var placeholder = this.selectedCountryData.iso2 ? intlTelInputUtils.getExampleNumber(this.selectedCountryData.iso2, this.options.nationalMode, numberType) : "";
                        placeholder = this._beforeSetNumber(placeholder);
                        if (typeof this.options.customPlaceholder === "function") {
                            placeholder = this.options.customPlaceholder(placeholder, this.selectedCountryData);
                        }
                        this.telInput.setAttribute("placeholder", placeholder);
                    }
                }
            }, {
                key: "_selectListItem",
                value: function _selectListItem(listItem) {
                    // update selected flag and active list item
                    var flagChanged = this._setFlag(listItem.getAttribute("data-country-code"));
                    this._closeDropdown();
                    this._updateDialCode(listItem.getAttribute("data-dial-code"), true);
                    // focus the input
                    this.telInput.focus();
                    // put cursor at end - this fix is required for FF and IE11 (with nationalMode=false i.e. auto
                    // inserting dial code), who try to put the cursor at the beginning the first time
                    var len = this.telInput.value.length;
                    this.telInput.setSelectionRange(len, len);
                    if (flagChanged) {
                        this._triggerCountryChange();
                    }
                }
            }, {
                key: "_closeDropdown",
                value: function _closeDropdown() {
                    this.countryList.classList.add("hide");
                    this.countryList.setAttribute("aria-expanded", "false");
                    // update the arrow
                    this.dropdownArrow.classList.remove("up");
                    // unbind key events
                    document.removeEventListener("keydown", this._handleKeydownOnDropdown);
                    document.documentElement.removeEventListener("click", this._handleClickOffToClose);
                    this.countryList.removeEventListener("mouseover", this._handleMouseoverCountryList);
                    this.countryList.removeEventListener("click", this._handleClickCountryList);
                    // remove menu from container
                    if (this.options.dropdownContainer) {
                        if (!this.isMobile) window.removeEventListener("scroll", this._handleWindowScroll);
                        if (this.dropdown.parentNode) this.dropdown.parentNode.removeChild(this.dropdown);
                    }
                    this._trigger("close:countrydropdown");
                }
            }, {
                key: "_scrollTo",
                value: function _scrollTo(element, middle) {
                    var container = this.countryList;
                    // windowTop from https://stackoverflow.com/a/14384091/217866
                    var windowTop = window.pageYOffset || document.documentElement.scrollTop;
                    var containerHeight = container.offsetHeight;
                    var containerTop = container.getBoundingClientRect().top + windowTop;
                    var containerBottom = containerTop + containerHeight;
                    var elementHeight = element.offsetHeight;
                    var elementTop = element.getBoundingClientRect().top + windowTop;
                    var elementBottom = elementTop + elementHeight;
                    var newScrollTop = elementTop - containerTop + container.scrollTop;
                    var middleOffset = containerHeight / 2 - elementHeight / 2;
                    if (elementTop < containerTop) {
                        // scroll up
                        if (middle) newScrollTop -= middleOffset;
                        container.scrollTop = newScrollTop;
                    } else if (elementBottom > containerBottom) {
                        // scroll down
                        if (middle) newScrollTop += middleOffset;
                        var heightDifference = containerHeight - elementHeight;
                        container.scrollTop = newScrollTop - heightDifference;
                    }
                }
            }, {
                key: "_updateDialCode",
                value: function _updateDialCode(newDialCodeBare, hasSelectedListItem) {
                    var inputVal = this.telInput.value;
                    // save having to pass this every time
                    var newDialCode = "+".concat(newDialCodeBare);
                    var newNumber;
                    if (inputVal.charAt(0) === "+") {
                        // there's a plus so we're dealing with a replacement (doesn't matter if nationalMode or not)
                        var prevDialCode = this._getDialCode(inputVal);
                        if (prevDialCode) {
                            // current number contains a valid dial code, so replace it
                            newNumber = inputVal.replace(prevDialCode, newDialCode);
                        } else {
                            // current number contains an invalid dial code, so ditch it
                            // (no way to determine where the invalid dial code ends and the rest of the number begins)
                            newNumber = newDialCode;
                        }
                    } else if (this.options.nationalMode || this.options.separateDialCode) {
                        // don't do anything
                        return;
                    } else {
                        // nationalMode is disabled
                        if (inputVal) {
                            // there is an existing value with no dial code: prefix the new dial code
                            newNumber = newDialCode + inputVal;
                        } else if (hasSelectedListItem || !this.options.autoHideDialCode) {
                            // no existing value and either they've just selected a list item, or autoHideDialCode is
                            // disabled: insert new dial code
                            newNumber = newDialCode;
                        } else {
                            return;
                        }
                    }
                    this.telInput.value = newNumber;
                }
            }, {
                key: "_getDialCode",
                value: function _getDialCode(number) {
                    var dialCode = "";
                    // only interested in international numbers (starting with a plus)
                    if (number.charAt(0) === "+") {
                        var numericChars = "";
                        // iterate over chars
                        for (var i = 0; i < number.length; i++) {
                            var c = number.charAt(i);
                            // if char is number (https://stackoverflow.com/a/8935649/217866)
                            if (!isNaN(parseInt(c, 10))) {
                                numericChars += c;
                                // if current numericChars make a valid dial code
                                if (this.countryCodes[numericChars]) {
                                    // store the actual raw string (useful for matching later)
                                    dialCode = number.substr(0, i + 1);
                                }
                                // longest dial code is 4 chars
                                if (numericChars.length === 4) {
                                    break;
                                }
                            }
                        }
                    }
                    return dialCode;
                }
            }, {
                key: "_getFullNumber",
                value: function _getFullNumber() {
                    var val = this.telInput.value.trim();
                    var dialCode = this.selectedCountryData.dialCode;
                    var prefix;
                    var numericVal = this._getNumeric(val);
                    // normalized means ensure starts with a 1, so we can match against the full dial code
                    var normalizedVal = numericVal.charAt(0) === "1" ? numericVal : "1".concat(numericVal);
                    if (this.options.separateDialCode) {
                        // when using separateDialCode, it is visible so is effectively part of the typed number
                        prefix = "+".concat(dialCode);
                    } else if (val && val.charAt(0) !== "+" && val.charAt(0) !== "1" && dialCode && dialCode.charAt(0) === "1" && dialCode.length === 4 && dialCode !== normalizedVal.substr(0, 4)) {
                        // ensure national NANP numbers contain the area code
                        prefix = dialCode.substr(1);
                    } else {
                        prefix = "";
                    }
                    return prefix + val;
                }
            }, {
                key: "_beforeSetNumber",
                value: function _beforeSetNumber(originalNumber) {
                    var number = originalNumber;
                    if (this.options.separateDialCode) {
                        var dialCode = this._getDialCode(number);
                        if (dialCode) {
                            // US dialCode is "+1", which is what we want
                            // CA dialCode is "+1 123", which is wrong - should be "+1" (as it has multiple area codes)
                            // AS dialCode is "+1 684", which is what we want (as it doesn't have area codes)
                            // Solution: if the country has area codes, then revert to just the dial code
                            if (this.selectedCountryData.areaCodes !== null) {
                                dialCode = "+".concat(this.selectedCountryData.dialCode);
                            }
                            // a lot of numbers will have a space separating the dial code and the main number, and
                            // some NANP numbers will have a hyphen e.g. +1 684-733-1234 - in both cases we want to get
                            // rid of it
                            // NOTE: don't just trim all non-numerics as may want to preserve an open parenthesis etc
                            var start = number[dialCode.length] === " " || number[dialCode.length] === "-" ? dialCode.length + 1 : dialCode.length;
                            number = number.substr(start);
                        }
                    }
                    return this._cap(number);
                }
            }, {
                key: "_triggerCountryChange",
                value: function _triggerCountryChange() {
                    this._trigger("countrychange");
                }
            }, {
                key: "handleAutoCountry",
                value: function handleAutoCountry() {
                    if (this.options.initialCountry === "auto") {
                        // we must set this even if there is an initial val in the input: in case the initial val is
                        // invalid and they delete it - they should see their auto country
                        this.defaultCountry = window.intlTelInputGlobals.autoCountry;
                        // if there's no initial value in the input, then update the flag
                        if (!this.telInput.value) {
                            this.setCountry(this.defaultCountry);
                        }
                        this.resolveAutoCountryPromise();
                    }
                }
            }, {
                key: "handleUtils",
                value: function handleUtils() {
                    // if the request was successful
                    if (window.intlTelInputUtils) {
                        // if there's an initial value in the input, then format it
                        if (this.telInput.value) {
                            this._updateValFromNumber(this.telInput.value);
                        }
                        this._updatePlaceholder();
                    }
                    this.resolveUtilsScriptPromise();
                }
            }, {
                key: "destroy",
                value: function destroy() {
                    var form = this.telInput.form;
                    if (this.options.allowDropdown) {
                        // make sure the dropdown is closed (and unbind listeners)
                        this._closeDropdown();
                        this.selectedFlag.removeEventListener("click", this._handleClickSelectedFlag);
                        this.flagsContainer.removeEventListener("keydown", this._handleFlagsContainerKeydown);
                        // label click hack
                        var label = this._getClosestLabel();
                        if (label) label.removeEventListener("click", this._handleLabelClick);
                    }
                    // unbind hiddenInput listeners
                    if (this.hiddenInput && form) form.removeEventListener("submit", this._handleHiddenInputSubmit);
                    // unbind autoHideDialCode listeners
                    if (this.options.autoHideDialCode) {
                        this.telInput.removeEventListener("mousedown", this._handleMousedownFocusEvent);
                        this.telInput.removeEventListener("focus", this._handleFocusEvent);
                        if (form) form.removeEventListener("submit", this._handleSubmitOrBlurEvent);
                        this.telInput.removeEventListener("blur", this._handleSubmitOrBlurEvent);
                    }
                    // unbind all events: key events, and focus/blur events if autoHideDialCode=true
                    this.telInput.removeEventListener("keyup", this._handleKeyupEvent);
                    this.telInput.removeEventListener("cut", this._handleClipboardEvent);
                    this.telInput.removeEventListener("paste", this._handleClipboardEvent);
                    // remove markup (but leave the original input)
                    var wrapper = this.telInput.parentNode;
                    wrapper.parentNode.insertBefore(this.telInput, wrapper);
                    wrapper.parentNode.removeChild(wrapper);
                    delete window.intlTelInputGlobals.instances[this.id];
                }
            }, {
                key: "getExtension",
                value: function getExtension() {
                    if (window.intlTelInputUtils) {
                        return intlTelInputUtils.getExtension(this._getFullNumber(), this.selectedCountryData.iso2);
                    }
                    return "";
                }
            }, {
                key: "getNumber",
                value: function getNumber(format) {
                    if (window.intlTelInputUtils) {
                        var iso2 = this.selectedCountryData.iso2;
                        return intlTelInputUtils.formatNumber(this._getFullNumber(), iso2, format);
                    }
                    return "";
                }
            }, {
                key: "getNumberType",
                value: function getNumberType() {
                    if (window.intlTelInputUtils) {
                        return intlTelInputUtils.getNumberType(this._getFullNumber(), this.selectedCountryData.iso2);
                    }
                    return -99;
                }
            }, {
                key: "getSelectedCountryData",
                value: function getSelectedCountryData() {
                    return this.selectedCountryData;
                }
            }, {
                key: "getValidationError",
                value: function getValidationError() {
                    if (window.intlTelInputUtils) {
                        var iso2 = this.selectedCountryData.iso2;
                        return intlTelInputUtils.getValidationError(this._getFullNumber(), iso2);
                    }
                    return -99;
                }
            }, {
                key: "isValidNumber",
                value: function isValidNumber() {
                    var val = this._getFullNumber().trim();
                    var countryCode = this.options.nationalMode ? this.selectedCountryData.iso2 : "";
                    return window.intlTelInputUtils ? intlTelInputUtils.isValidNumber(val, countryCode) : null;
                }
            }, {
                key: "setCountry",
                value: function setCountry(originalCountryCode) {
                    var countryCode = originalCountryCode.toLowerCase();
                    // check if already selected
                    if (!this.selectedFlagInner.classList.contains(countryCode)) {
                        this._setFlag(countryCode);
                        this._updateDialCode(this.selectedCountryData.dialCode, false);
                        this._triggerCountryChange();
                    }
                }
            }, {
                key: "setNumber",
                value: function setNumber(number) {
                    // we must update the flag first, which updates this.selectedCountryData, which is used for
                    // formatting the number before displaying it
                    var flagChanged = this._updateFlagFromNumber(number);
                    this._updateValFromNumber(number);
                    if (flagChanged) {
                        this._triggerCountryChange();
                    }
                }
            }, {
                key: "setPlaceholderNumberType",
                value: function setPlaceholderNumberType(type) {
                    this.options.placeholderNumberType = type;
                    this._updatePlaceholder();
                }
            } ]);
            return Iti;
        }();
        /********************
 *  STATIC METHODS
 ********************/
        // get the country data object
        window.intlTelInputGlobals.getCountryData = function() {
            return allCountries;
        };
        // inject a <script> element to load utils.js
        var injectScript = function injectScript(path, handleSuccess, handleFailure) {
            // inject a new script element into the page
            var script = document.createElement("script");
            script.onload = function() {
                forEachInstance("handleUtils");
                if (handleSuccess) handleSuccess();
            };
            script.onerror = function() {
                forEachInstance("rejectUtilsScriptPromise");
                if (handleFailure) handleFailure();
            };
            script.className = "iti-load-utils";
            script.async = true;
            script.src = path;
            document.body.appendChild(script);
        };
        // load the utils script
        window.intlTelInputGlobals.loadUtils = function(path) {
            // 2 options:
            // 1) not already started loading (start)
            // 2) already started loading (do nothing - just wait for the onload callback to fire, which will
            // trigger handleUtils on all instances, invoking their resolveUtilsScriptPromise functions)
            if (!window.intlTelInputUtils && !window.intlTelInputGlobals.startedLoadingUtilsScript) {
                // only do this once
                window.intlTelInputGlobals.startedLoadingUtilsScript = true;
                // if we have promises, then return a promise
                if (typeof Promise !== "undefined") {
                    return new Promise(function(resolve, reject) {
                        return injectScript(path, resolve, reject);
                    });
                }
                injectScript(path);
            }
            return null;
        };
        // default options
        window.intlTelInputGlobals.defaults = defaults;
        // version
        window.intlTelInputGlobals.version = "14.0.6";
        // convenience wrapper
        return function(input, options) {
            var iti = new Iti(input, options);
            iti._init();
            window.intlTelInputGlobals.instances[iti.id] = iti;
            return iti;
        };
    }();
});
;
!function(i){"use strict";"function"==typeof define&&define.amd?define(["jquery"],i):"undefined"!=typeof exports?module.exports=i(require("jquery")):i(jQuery)}(function(i){"use strict";var e=window.Slick||{};(e=function(){var e=0;return function(t,o){var s,n=this;n.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:i(t),appendDots:i(t),arrows:!0,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e,t){return i('<button type="button" />').text(t+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},n.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},i.extend(n,n.initials),n.activeBreakpoint=null,n.animType=null,n.animProp=null,n.breakpoints=[],n.breakpointSettings=[],n.cssTransitions=!1,n.focussed=!1,n.interrupted=!1,n.hidden="hidden",n.paused=!0,n.positionProp=null,n.respondTo=null,n.rowCount=1,n.shouldClick=!0,n.$slider=i(t),n.$slidesCache=null,n.transformType=null,n.transitionType=null,n.visibilityChange="visibilitychange",n.windowWidth=0,n.windowTimer=null,s=i(t).data("slick")||{},n.options=i.extend({},n.defaults,o,s),n.currentSlide=n.options.initialSlide,n.originalSettings=n.options,void 0!==document.mozHidden?(n.hidden="mozHidden",n.visibilityChange="mozvisibilitychange"):void 0!==document.webkitHidden&&(n.hidden="webkitHidden",n.visibilityChange="webkitvisibilitychange"),n.autoPlay=i.proxy(n.autoPlay,n),n.autoPlayClear=i.proxy(n.autoPlayClear,n),n.autoPlayIterator=i.proxy(n.autoPlayIterator,n),n.changeSlide=i.proxy(n.changeSlide,n),n.clickHandler=i.proxy(n.clickHandler,n),n.selectHandler=i.proxy(n.selectHandler,n),n.setPosition=i.proxy(n.setPosition,n),n.swipeHandler=i.proxy(n.swipeHandler,n),n.dragHandler=i.proxy(n.dragHandler,n),n.keyHandler=i.proxy(n.keyHandler,n),n.instanceUid=e++,n.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,n.registerBreakpoints(),n.init(!0)}}()).prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},e.prototype.addSlide=e.prototype.slickAdd=function(e,t,o){var s=this;if("boolean"==typeof t)o=t,t=null;else if(t<0||t>=s.slideCount)return!1;s.unload(),"number"==typeof t?0===t&&0===s.$slides.length?i(e).appendTo(s.$slideTrack):o?i(e).insertBefore(s.$slides.eq(t)):i(e).insertAfter(s.$slides.eq(t)):!0===o?i(e).prependTo(s.$slideTrack):i(e).appendTo(s.$slideTrack),s.$slides=s.$slideTrack.children(this.options.slide),s.$slideTrack.children(this.options.slide).detach(),s.$slideTrack.append(s.$slides),s.$slides.each(function(e,t){i(t).attr("data-slick-index",e)}),s.$slidesCache=s.$slides,s.reinit()},e.prototype.animateHeight=function(){var i=this;if(1===i.options.slidesToShow&&!0===i.options.adaptiveHeight&&!1===i.options.vertical){var e=i.$slides.eq(i.currentSlide).outerHeight(!0);i.$list.animate({height:e},i.options.speed)}},e.prototype.animateSlide=function(e,t){var o={},s=this;s.animateHeight(),!0===s.options.rtl&&!1===s.options.vertical&&(e=-e),!1===s.transformsEnabled?!1===s.options.vertical?s.$slideTrack.animate({left:e},s.options.speed,s.options.easing,t):s.$slideTrack.animate({top:e},s.options.speed,s.options.easing,t):!1===s.cssTransitions?(!0===s.options.rtl&&(s.currentLeft=-s.currentLeft),i({animStart:s.currentLeft}).animate({animStart:e},{duration:s.options.speed,easing:s.options.easing,step:function(i){i=Math.ceil(i),!1===s.options.vertical?(o[s.animType]="translate("+i+"px, 0px)",s.$slideTrack.css(o)):(o[s.animType]="translate(0px,"+i+"px)",s.$slideTrack.css(o))},complete:function(){t&&t.call()}})):(s.applyTransition(),e=Math.ceil(e),!1===s.options.vertical?o[s.animType]="translate3d("+e+"px, 0px, 0px)":o[s.animType]="translate3d(0px,"+e+"px, 0px)",s.$slideTrack.css(o),t&&setTimeout(function(){s.disableTransition(),t.call()},s.options.speed))},e.prototype.getNavTarget=function(){var e=this,t=e.options.asNavFor;return t&&null!==t&&(t=i(t).not(e.$slider)),t},e.prototype.asNavFor=function(e){var t=this.getNavTarget();null!==t&&"object"==typeof t&&t.each(function(){var t=i(this).slick("getSlick");t.unslicked||t.slideHandler(e,!0)})},e.prototype.applyTransition=function(i){var e=this,t={};!1===e.options.fade?t[e.transitionType]=e.transformType+" "+e.options.speed+"ms "+e.options.cssEase:t[e.transitionType]="opacity "+e.options.speed+"ms "+e.options.cssEase,!1===e.options.fade?e.$slideTrack.css(t):e.$slides.eq(i).css(t)},e.prototype.autoPlay=function(){var i=this;i.autoPlayClear(),i.slideCount>i.options.slidesToShow&&(i.autoPlayTimer=setInterval(i.autoPlayIterator,i.options.autoplaySpeed))},e.prototype.autoPlayClear=function(){var i=this;i.autoPlayTimer&&clearInterval(i.autoPlayTimer)},e.prototype.autoPlayIterator=function(){var i=this,e=i.currentSlide+i.options.slidesToScroll;i.paused||i.interrupted||i.focussed||(!1===i.options.infinite&&(1===i.direction&&i.currentSlide+1===i.slideCount-1?i.direction=0:0===i.direction&&(e=i.currentSlide-i.options.slidesToScroll,i.currentSlide-1==0&&(i.direction=1))),i.slideHandler(e))},e.prototype.buildArrows=function(){var e=this;!0===e.options.arrows&&(e.$prevArrow=i(e.options.prevArrow).addClass("slick-arrow"),e.$nextArrow=i(e.options.nextArrow).addClass("slick-arrow"),e.slideCount>e.options.slidesToShow?(e.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.prependTo(e.options.appendArrows),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.appendTo(e.options.appendArrows),!0!==e.options.infinite&&e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):e.$prevArrow.add(e.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},e.prototype.buildDots=function(){var e,t,o=this;if(!0===o.options.dots){for(o.$slider.addClass("slick-dotted"),t=i("<ul />").addClass(o.options.dotsClass),e=0;e<=o.getDotCount();e+=1)t.append(i("<li />").append(o.options.customPaging.call(this,o,e)));o.$dots=t.appendTo(o.options.appendDots),o.$dots.find("li").first().addClass("slick-active")}},e.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(e.options.slide+":not(.slick-cloned)").addClass("slick-slide"),e.slideCount=e.$slides.length,e.$slides.each(function(e,t){i(t).attr("data-slick-index",e).data("originalStyling",i(t).attr("style")||"")}),e.$slider.addClass("slick-slider"),e.$slideTrack=0===e.slideCount?i('<div class="slick-track"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class="slick-track"/>').parent(),e.$list=e.$slideTrack.wrap('<div class="slick-list"/>').parent(),e.$slideTrack.css("opacity",0),!0!==e.options.centerMode&&!0!==e.options.swipeToSlide||(e.options.slidesToScroll=1),i("img[data-lazy]",e.$slider).not("[src]").addClass("slick-loading"),e.setupInfinite(),e.buildArrows(),e.buildDots(),e.updateDots(),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),!0===e.options.draggable&&e.$list.addClass("draggable")},e.prototype.buildRows=function(){var i,e,t,o,s,n,r,l=this;if(o=document.createDocumentFragment(),n=l.$slider.children(),l.options.rows>1){for(r=l.options.slidesPerRow*l.options.rows,s=Math.ceil(n.length/r),i=0;i<s;i++){var d=document.createElement("div");for(e=0;e<l.options.rows;e++){var a=document.createElement("div");for(t=0;t<l.options.slidesPerRow;t++){var c=i*r+(e*l.options.slidesPerRow+t);n.get(c)&&a.appendChild(n.get(c))}d.appendChild(a)}o.appendChild(d)}l.$slider.empty().append(o),l.$slider.children().children().children().css({width:100/l.options.slidesPerRow+"%",display:"inline-block"})}},e.prototype.checkResponsive=function(e,t){var o,s,n,r=this,l=!1,d=r.$slider.width(),a=window.innerWidth||i(window).width();if("window"===r.respondTo?n=a:"slider"===r.respondTo?n=d:"min"===r.respondTo&&(n=Math.min(a,d)),r.options.responsive&&r.options.responsive.length&&null!==r.options.responsive){s=null;for(o in r.breakpoints)r.breakpoints.hasOwnProperty(o)&&(!1===r.originalSettings.mobileFirst?n<r.breakpoints[o]&&(s=r.breakpoints[o]):n>r.breakpoints[o]&&(s=r.breakpoints[o]));null!==s?null!==r.activeBreakpoint?(s!==r.activeBreakpoint||t)&&(r.activeBreakpoint=s,"unslick"===r.breakpointSettings[s]?r.unslick(s):(r.options=i.extend({},r.originalSettings,r.breakpointSettings[s]),!0===e&&(r.currentSlide=r.options.initialSlide),r.refresh(e)),l=s):(r.activeBreakpoint=s,"unslick"===r.breakpointSettings[s]?r.unslick(s):(r.options=i.extend({},r.originalSettings,r.breakpointSettings[s]),!0===e&&(r.currentSlide=r.options.initialSlide),r.refresh(e)),l=s):null!==r.activeBreakpoint&&(r.activeBreakpoint=null,r.options=r.originalSettings,!0===e&&(r.currentSlide=r.options.initialSlide),r.refresh(e),l=s),e||!1===l||r.$slider.trigger("breakpoint",[r,l])}},e.prototype.changeSlide=function(e,t){var o,s,n,r=this,l=i(e.currentTarget);switch(l.is("a")&&e.preventDefault(),l.is("li")||(l=l.closest("li")),n=r.slideCount%r.options.slidesToScroll!=0,o=n?0:(r.slideCount-r.currentSlide)%r.options.slidesToScroll,e.data.message){case"previous":s=0===o?r.options.slidesToScroll:r.options.slidesToShow-o,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide-s,!1,t);break;case"next":s=0===o?r.options.slidesToScroll:o,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide+s,!1,t);break;case"index":var d=0===e.data.index?0:e.data.index||l.index()*r.options.slidesToScroll;r.slideHandler(r.checkNavigable(d),!1,t),l.children().trigger("focus");break;default:return}},e.prototype.checkNavigable=function(i){var e,t;if(e=this.getNavigableIndexes(),t=0,i>e[e.length-1])i=e[e.length-1];else for(var o in e){if(i<e[o]){i=t;break}t=e[o]}return i},e.prototype.cleanUpEvents=function(){var e=this;e.options.dots&&null!==e.$dots&&(i("li",e.$dots).off("click.slick",e.changeSlide).off("mouseenter.slick",i.proxy(e.interrupt,e,!0)).off("mouseleave.slick",i.proxy(e.interrupt,e,!1)),!0===e.options.accessibility&&e.$dots.off("keydown.slick",e.keyHandler)),e.$slider.off("focus.slick blur.slick"),!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow&&e.$prevArrow.off("click.slick",e.changeSlide),e.$nextArrow&&e.$nextArrow.off("click.slick",e.changeSlide),!0===e.options.accessibility&&(e.$prevArrow&&e.$prevArrow.off("keydown.slick",e.keyHandler),e.$nextArrow&&e.$nextArrow.off("keydown.slick",e.keyHandler))),e.$list.off("touchstart.slick mousedown.slick",e.swipeHandler),e.$list.off("touchmove.slick mousemove.slick",e.swipeHandler),e.$list.off("touchend.slick mouseup.slick",e.swipeHandler),e.$list.off("touchcancel.slick mouseleave.slick",e.swipeHandler),e.$list.off("click.slick",e.clickHandler),i(document).off(e.visibilityChange,e.visibility),e.cleanUpSlideEvents(),!0===e.options.accessibility&&e.$list.off("keydown.slick",e.keyHandler),!0===e.options.focusOnSelect&&i(e.$slideTrack).children().off("click.slick",e.selectHandler),i(window).off("orientationchange.slick.slick-"+e.instanceUid,e.orientationChange),i(window).off("resize.slick.slick-"+e.instanceUid,e.resize),i("[draggable!=true]",e.$slideTrack).off("dragstart",e.preventDefault),i(window).off("load.slick.slick-"+e.instanceUid,e.setPosition)},e.prototype.cleanUpSlideEvents=function(){var e=this;e.$list.off("mouseenter.slick",i.proxy(e.interrupt,e,!0)),e.$list.off("mouseleave.slick",i.proxy(e.interrupt,e,!1))},e.prototype.cleanUpRows=function(){var i,e=this;e.options.rows>1&&((i=e.$slides.children().children()).removeAttr("style"),e.$slider.empty().append(i))},e.prototype.clickHandler=function(i){!1===this.shouldClick&&(i.stopImmediatePropagation(),i.stopPropagation(),i.preventDefault())},e.prototype.destroy=function(e){var t=this;t.autoPlayClear(),t.touchObject={},t.cleanUpEvents(),i(".slick-cloned",t.$slider).detach(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.$prevArrow.length&&(t.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove()),t.$nextArrow&&t.$nextArrow.length&&(t.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove()),t.$slides&&(t.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){i(this).attr("style",i(this).data("originalStyling"))}),t.$slideTrack.children(this.options.slide).detach(),t.$slideTrack.detach(),t.$list.detach(),t.$slider.append(t.$slides)),t.cleanUpRows(),t.$slider.removeClass("slick-slider"),t.$slider.removeClass("slick-initialized"),t.$slider.removeClass("slick-dotted"),t.unslicked=!0,e||t.$slider.trigger("destroy",[t])},e.prototype.disableTransition=function(i){var e=this,t={};t[e.transitionType]="",!1===e.options.fade?e.$slideTrack.css(t):e.$slides.eq(i).css(t)},e.prototype.fadeSlide=function(i,e){var t=this;!1===t.cssTransitions?(t.$slides.eq(i).css({zIndex:t.options.zIndex}),t.$slides.eq(i).animate({opacity:1},t.options.speed,t.options.easing,e)):(t.applyTransition(i),t.$slides.eq(i).css({opacity:1,zIndex:t.options.zIndex}),e&&setTimeout(function(){t.disableTransition(i),e.call()},t.options.speed))},e.prototype.fadeSlideOut=function(i){var e=this;!1===e.cssTransitions?e.$slides.eq(i).animate({opacity:0,zIndex:e.options.zIndex-2},e.options.speed,e.options.easing):(e.applyTransition(i),e.$slides.eq(i).css({opacity:0,zIndex:e.options.zIndex-2}))},e.prototype.filterSlides=e.prototype.slickFilter=function(i){var e=this;null!==i&&(e.$slidesCache=e.$slides,e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.filter(i).appendTo(e.$slideTrack),e.reinit())},e.prototype.focusHandler=function(){var e=this;e.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*",function(t){t.stopImmediatePropagation();var o=i(this);setTimeout(function(){e.options.pauseOnFocus&&(e.focussed=o.is(":focus"),e.autoPlay())},0)})},e.prototype.getCurrent=e.prototype.slickCurrentSlide=function(){return this.currentSlide},e.prototype.getDotCount=function(){var i=this,e=0,t=0,o=0;if(!0===i.options.infinite)if(i.slideCount<=i.options.slidesToShow)++o;else for(;e<i.slideCount;)++o,e=t+i.options.slidesToScroll,t+=i.options.slidesToScroll<=i.options.slidesToShow?i.options.slidesToScroll:i.options.slidesToShow;else if(!0===i.options.centerMode)o=i.slideCount;else if(i.options.asNavFor)for(;e<i.slideCount;)++o,e=t+i.options.slidesToScroll,t+=i.options.slidesToScroll<=i.options.slidesToShow?i.options.slidesToScroll:i.options.slidesToShow;else o=1+Math.ceil((i.slideCount-i.options.slidesToShow)/i.options.slidesToScroll);return o-1},e.prototype.getLeft=function(i){var e,t,o,s,n=this,r=0;return n.slideOffset=0,t=n.$slides.first().outerHeight(!0),!0===n.options.infinite?(n.slideCount>n.options.slidesToShow&&(n.slideOffset=n.slideWidth*n.options.slidesToShow*-1,s=-1,!0===n.options.vertical&&!0===n.options.centerMode&&(2===n.options.slidesToShow?s=-1.5:1===n.options.slidesToShow&&(s=-2)),r=t*n.options.slidesToShow*s),n.slideCount%n.options.slidesToScroll!=0&&i+n.options.slidesToScroll>n.slideCount&&n.slideCount>n.options.slidesToShow&&(i>n.slideCount?(n.slideOffset=(n.options.slidesToShow-(i-n.slideCount))*n.slideWidth*-1,r=(n.options.slidesToShow-(i-n.slideCount))*t*-1):(n.slideOffset=n.slideCount%n.options.slidesToScroll*n.slideWidth*-1,r=n.slideCount%n.options.slidesToScroll*t*-1))):i+n.options.slidesToShow>n.slideCount&&(n.slideOffset=(i+n.options.slidesToShow-n.slideCount)*n.slideWidth,r=(i+n.options.slidesToShow-n.slideCount)*t),n.slideCount<=n.options.slidesToShow&&(n.slideOffset=0,r=0),!0===n.options.centerMode&&n.slideCount<=n.options.slidesToShow?n.slideOffset=n.slideWidth*Math.floor(n.options.slidesToShow)/2-n.slideWidth*n.slideCount/2:!0===n.options.centerMode&&!0===n.options.infinite?n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)-n.slideWidth:!0===n.options.centerMode&&(n.slideOffset=0,n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)),e=!1===n.options.vertical?i*n.slideWidth*-1+n.slideOffset:i*t*-1+r,!0===n.options.variableWidth&&(o=n.slideCount<=n.options.slidesToShow||!1===n.options.infinite?n.$slideTrack.children(".slick-slide").eq(i):n.$slideTrack.children(".slick-slide").eq(i+n.options.slidesToShow),e=!0===n.options.rtl?o[0]?-1*(n.$slideTrack.width()-o[0].offsetLeft-o.width()):0:o[0]?-1*o[0].offsetLeft:0,!0===n.options.centerMode&&(o=n.slideCount<=n.options.slidesToShow||!1===n.options.infinite?n.$slideTrack.children(".slick-slide").eq(i):n.$slideTrack.children(".slick-slide").eq(i+n.options.slidesToShow+1),e=!0===n.options.rtl?o[0]?-1*(n.$slideTrack.width()-o[0].offsetLeft-o.width()):0:o[0]?-1*o[0].offsetLeft:0,e+=(n.$list.width()-o.outerWidth())/2)),e},e.prototype.getOption=e.prototype.slickGetOption=function(i){return this.options[i]},e.prototype.getNavigableIndexes=function(){var i,e=this,t=0,o=0,s=[];for(!1===e.options.infinite?i=e.slideCount:(t=-1*e.options.slidesToScroll,o=-1*e.options.slidesToScroll,i=2*e.slideCount);t<i;)s.push(t),t=o+e.options.slidesToScroll,o+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return s},e.prototype.getSlick=function(){return this},e.prototype.getSlideCount=function(){var e,t,o=this;return t=!0===o.options.centerMode?o.slideWidth*Math.floor(o.options.slidesToShow/2):0,!0===o.options.swipeToSlide?(o.$slideTrack.find(".slick-slide").each(function(s,n){if(n.offsetLeft-t+i(n).outerWidth()/2>-1*o.swipeLeft)return e=n,!1}),Math.abs(i(e).attr("data-slick-index")-o.currentSlide)||1):o.options.slidesToScroll},e.prototype.goTo=e.prototype.slickGoTo=function(i,e){this.changeSlide({data:{message:"index",index:parseInt(i)}},e)},e.prototype.init=function(e){var t=this;i(t.$slider).hasClass("slick-initialized")||(i(t.$slider).addClass("slick-initialized"),t.buildRows(),t.buildOut(),t.setProps(),t.startLoad(),t.loadSlider(),t.initializeEvents(),t.updateArrows(),t.updateDots(),t.checkResponsive(!0),t.focusHandler()),e&&t.$slider.trigger("init",[t]),!0===t.options.accessibility&&t.initADA(),t.options.autoplay&&(t.paused=!1,t.autoPlay())},e.prototype.initADA=function(){var e=this,t=Math.ceil(e.slideCount/e.options.slidesToShow),o=e.getNavigableIndexes().filter(function(i){return i>=0&&i<e.slideCount});e.$slides.add(e.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),null!==e.$dots&&(e.$slides.not(e.$slideTrack.find(".slick-cloned")).each(function(t){var s=o.indexOf(t);i(this).attr({role:"tabpanel",id:"slick-slide"+e.instanceUid+t,tabindex:-1}),-1!==s&&i(this).attr({"aria-describedby":"slick-slide-control"+e.instanceUid+s})}),e.$dots.attr("role","tablist").find("li").each(function(s){var n=o[s];i(this).attr({role:"presentation"}),i(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+e.instanceUid+s,"aria-controls":"slick-slide"+e.instanceUid+n,"aria-label":s+1+" of "+t,"aria-selected":null,tabindex:"-1"})}).eq(e.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end());for(var s=e.currentSlide,n=s+e.options.slidesToShow;s<n;s++)e.$slides.eq(s).attr("tabindex",0);e.activateADA()},e.prototype.initArrowEvents=function(){var i=this;!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},i.changeSlide),i.$nextArrow.off("click.slick").on("click.slick",{message:"next"},i.changeSlide),!0===i.options.accessibility&&(i.$prevArrow.on("keydown.slick",i.keyHandler),i.$nextArrow.on("keydown.slick",i.keyHandler)))},e.prototype.initDotEvents=function(){var e=this;!0===e.options.dots&&(i("li",e.$dots).on("click.slick",{message:"index"},e.changeSlide),!0===e.options.accessibility&&e.$dots.on("keydown.slick",e.keyHandler)),!0===e.options.dots&&!0===e.options.pauseOnDotsHover&&i("li",e.$dots).on("mouseenter.slick",i.proxy(e.interrupt,e,!0)).on("mouseleave.slick",i.proxy(e.interrupt,e,!1))},e.prototype.initSlideEvents=function(){var e=this;e.options.pauseOnHover&&(e.$list.on("mouseenter.slick",i.proxy(e.interrupt,e,!0)),e.$list.on("mouseleave.slick",i.proxy(e.interrupt,e,!1)))},e.prototype.initializeEvents=function(){var e=this;e.initArrowEvents(),e.initDotEvents(),e.initSlideEvents(),e.$list.on("touchstart.slick mousedown.slick",{action:"start"},e.swipeHandler),e.$list.on("touchmove.slick mousemove.slick",{action:"move"},e.swipeHandler),e.$list.on("touchend.slick mouseup.slick",{action:"end"},e.swipeHandler),e.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},e.swipeHandler),e.$list.on("click.slick",e.clickHandler),i(document).on(e.visibilityChange,i.proxy(e.visibility,e)),!0===e.options.accessibility&&e.$list.on("keydown.slick",e.keyHandler),!0===e.options.focusOnSelect&&i(e.$slideTrack).children().on("click.slick",e.selectHandler),i(window).on("orientationchange.slick.slick-"+e.instanceUid,i.proxy(e.orientationChange,e)),i(window).on("resize.slick.slick-"+e.instanceUid,i.proxy(e.resize,e)),i("[draggable!=true]",e.$slideTrack).on("dragstart",e.preventDefault),i(window).on("load.slick.slick-"+e.instanceUid,e.setPosition),i(e.setPosition)},e.prototype.initUI=function(){var i=this;!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.show(),i.$nextArrow.show()),!0===i.options.dots&&i.slideCount>i.options.slidesToShow&&i.$dots.show()},e.prototype.keyHandler=function(i){var e=this;i.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===i.keyCode&&!0===e.options.accessibility?e.changeSlide({data:{message:!0===e.options.rtl?"next":"previous"}}):39===i.keyCode&&!0===e.options.accessibility&&e.changeSlide({data:{message:!0===e.options.rtl?"previous":"next"}}))},e.prototype.lazyLoad=function(){function e(e){i("img[data-lazy]",e).each(function(){var e=i(this),t=i(this).attr("data-lazy"),o=i(this).attr("data-srcset"),s=i(this).attr("data-sizes")||n.$slider.attr("data-sizes"),r=document.createElement("img");r.onload=function(){e.animate({opacity:0},100,function(){o&&(e.attr("srcset",o),s&&e.attr("sizes",s)),e.attr("src",t).animate({opacity:1},200,function(){e.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")}),n.$slider.trigger("lazyLoaded",[n,e,t])})},r.onerror=function(){e.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),n.$slider.trigger("lazyLoadError",[n,e,t])},r.src=t})}var t,o,s,n=this;if(!0===n.options.centerMode?!0===n.options.infinite?s=(o=n.currentSlide+(n.options.slidesToShow/2+1))+n.options.slidesToShow+2:(o=Math.max(0,n.currentSlide-(n.options.slidesToShow/2+1)),s=n.options.slidesToShow/2+1+2+n.currentSlide):(o=n.options.infinite?n.options.slidesToShow+n.currentSlide:n.currentSlide,s=Math.ceil(o+n.options.slidesToShow),!0===n.options.fade&&(o>0&&o--,s<=n.slideCount&&s++)),t=n.$slider.find(".slick-slide").slice(o,s),"anticipated"===n.options.lazyLoad)for(var r=o-1,l=s,d=n.$slider.find(".slick-slide"),a=0;a<n.options.slidesToScroll;a++)r<0&&(r=n.slideCount-1),t=(t=t.add(d.eq(r))).add(d.eq(l)),r--,l++;e(t),n.slideCount<=n.options.slidesToShow?e(n.$slider.find(".slick-slide")):n.currentSlide>=n.slideCount-n.options.slidesToShow?e(n.$slider.find(".slick-cloned").slice(0,n.options.slidesToShow)):0===n.currentSlide&&e(n.$slider.find(".slick-cloned").slice(-1*n.options.slidesToShow))},e.prototype.loadSlider=function(){var i=this;i.setPosition(),i.$slideTrack.css({opacity:1}),i.$slider.removeClass("slick-loading"),i.initUI(),"progressive"===i.options.lazyLoad&&i.progressiveLazyLoad()},e.prototype.next=e.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},e.prototype.orientationChange=function(){var i=this;i.checkResponsive(),i.setPosition()},e.prototype.pause=e.prototype.slickPause=function(){var i=this;i.autoPlayClear(),i.paused=!0},e.prototype.play=e.prototype.slickPlay=function(){var i=this;i.autoPlay(),i.options.autoplay=!0,i.paused=!1,i.focussed=!1,i.interrupted=!1},e.prototype.postSlide=function(e){var t=this;t.unslicked||(t.$slider.trigger("afterChange",[t,e]),t.animating=!1,t.slideCount>t.options.slidesToShow&&t.setPosition(),t.swipeLeft=null,t.options.autoplay&&t.autoPlay(),!0===t.options.accessibility&&(t.initADA(),t.options.focusOnChange&&i(t.$slides.get(t.currentSlide)).attr("tabindex",0).focus()))},e.prototype.prev=e.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})},e.prototype.preventDefault=function(i){i.preventDefault()},e.prototype.progressiveLazyLoad=function(e){e=e||1;var t,o,s,n,r,l=this,d=i("img[data-lazy]",l.$slider);d.length?(t=d.first(),o=t.attr("data-lazy"),s=t.attr("data-srcset"),n=t.attr("data-sizes")||l.$slider.attr("data-sizes"),(r=document.createElement("img")).onload=function(){s&&(t.attr("srcset",s),n&&t.attr("sizes",n)),t.attr("src",o).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),!0===l.options.adaptiveHeight&&l.setPosition(),l.$slider.trigger("lazyLoaded",[l,t,o]),l.progressiveLazyLoad()},r.onerror=function(){e<3?setTimeout(function(){l.progressiveLazyLoad(e+1)},500):(t.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),l.$slider.trigger("lazyLoadError",[l,t,o]),l.progressiveLazyLoad())},r.src=o):l.$slider.trigger("allImagesLoaded",[l])},e.prototype.refresh=function(e){var t,o,s=this;o=s.slideCount-s.options.slidesToShow,!s.options.infinite&&s.currentSlide>o&&(s.currentSlide=o),s.slideCount<=s.options.slidesToShow&&(s.currentSlide=0),t=s.currentSlide,s.destroy(!0),i.extend(s,s.initials,{currentSlide:t}),s.init(),e||s.changeSlide({data:{message:"index",index:t}},!1)},e.prototype.registerBreakpoints=function(){var e,t,o,s=this,n=s.options.responsive||null;if("array"===i.type(n)&&n.length){s.respondTo=s.options.respondTo||"window";for(e in n)if(o=s.breakpoints.length-1,n.hasOwnProperty(e)){for(t=n[e].breakpoint;o>=0;)s.breakpoints[o]&&s.breakpoints[o]===t&&s.breakpoints.splice(o,1),o--;s.breakpoints.push(t),s.breakpointSettings[t]=n[e].settings}s.breakpoints.sort(function(i,e){return s.options.mobileFirst?i-e:e-i})}},e.prototype.reinit=function(){var e=this;e.$slides=e.$slideTrack.children(e.options.slide).addClass("slick-slide"),e.slideCount=e.$slides.length,e.currentSlide>=e.slideCount&&0!==e.currentSlide&&(e.currentSlide=e.currentSlide-e.options.slidesToScroll),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),e.registerBreakpoints(),e.setProps(),e.setupInfinite(),e.buildArrows(),e.updateArrows(),e.initArrowEvents(),e.buildDots(),e.updateDots(),e.initDotEvents(),e.cleanUpSlideEvents(),e.initSlideEvents(),e.checkResponsive(!1,!0),!0===e.options.focusOnSelect&&i(e.$slideTrack).children().on("click.slick",e.selectHandler),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),e.setPosition(),e.focusHandler(),e.paused=!e.options.autoplay,e.autoPlay(),e.$slider.trigger("reInit",[e])},e.prototype.resize=function(){var e=this;i(window).width()!==e.windowWidth&&(clearTimeout(e.windowDelay),e.windowDelay=window.setTimeout(function(){e.windowWidth=i(window).width(),e.checkResponsive(),e.unslicked||e.setPosition()},50))},e.prototype.removeSlide=e.prototype.slickRemove=function(i,e,t){var o=this;if(i="boolean"==typeof i?!0===(e=i)?0:o.slideCount-1:!0===e?--i:i,o.slideCount<1||i<0||i>o.slideCount-1)return!1;o.unload(),!0===t?o.$slideTrack.children().remove():o.$slideTrack.children(this.options.slide).eq(i).remove(),o.$slides=o.$slideTrack.children(this.options.slide),o.$slideTrack.children(this.options.slide).detach(),o.$slideTrack.append(o.$slides),o.$slidesCache=o.$slides,o.reinit()},e.prototype.setCSS=function(i){var e,t,o=this,s={};!0===o.options.rtl&&(i=-i),e="left"==o.positionProp?Math.ceil(i)+"px":"0px",t="top"==o.positionProp?Math.ceil(i)+"px":"0px",s[o.positionProp]=i,!1===o.transformsEnabled?o.$slideTrack.css(s):(s={},!1===o.cssTransitions?(s[o.animType]="translate("+e+", "+t+")",o.$slideTrack.css(s)):(s[o.animType]="translate3d("+e+", "+t+", 0px)",o.$slideTrack.css(s)))},e.prototype.setDimensions=function(){var i=this;!1===i.options.vertical?!0===i.options.centerMode&&i.$list.css({padding:"0px "+i.options.centerPadding}):(i.$list.height(i.$slides.first().outerHeight(!0)*i.options.slidesToShow),!0===i.options.centerMode&&i.$list.css({padding:i.options.centerPadding+" 0px"})),i.listWidth=i.$list.width(),i.listHeight=i.$list.height(),!1===i.options.vertical&&!1===i.options.variableWidth?(i.slideWidth=Math.ceil(i.listWidth/i.options.slidesToShow),i.$slideTrack.width(Math.ceil(i.slideWidth*i.$slideTrack.children(".slick-slide").length))):!0===i.options.variableWidth?i.$slideTrack.width(5e3*i.slideCount):(i.slideWidth=Math.ceil(i.listWidth),i.$slideTrack.height(Math.ceil(i.$slides.first().outerHeight(!0)*i.$slideTrack.children(".slick-slide").length)));var e=i.$slides.first().outerWidth(!0)-i.$slides.first().width();!1===i.options.variableWidth&&i.$slideTrack.children(".slick-slide").width(i.slideWidth-e)},e.prototype.setFade=function(){var e,t=this;t.$slides.each(function(o,s){e=t.slideWidth*o*-1,!0===t.options.rtl?i(s).css({position:"relative",right:e,top:0,zIndex:t.options.zIndex-2,opacity:0}):i(s).css({position:"relative",left:e,top:0,zIndex:t.options.zIndex-2,opacity:0})}),t.$slides.eq(t.currentSlide).css({zIndex:t.options.zIndex-1,opacity:1})},e.prototype.setHeight=function(){var i=this;if(1===i.options.slidesToShow&&!0===i.options.adaptiveHeight&&!1===i.options.vertical){var e=i.$slides.eq(i.currentSlide).outerHeight(!0);i.$list.css("height",e)}},e.prototype.setOption=e.prototype.slickSetOption=function(){var e,t,o,s,n,r=this,l=!1;if("object"===i.type(arguments[0])?(o=arguments[0],l=arguments[1],n="multiple"):"string"===i.type(arguments[0])&&(o=arguments[0],s=arguments[1],l=arguments[2],"responsive"===arguments[0]&&"array"===i.type(arguments[1])?n="responsive":void 0!==arguments[1]&&(n="single")),"single"===n)r.options[o]=s;else if("multiple"===n)i.each(o,function(i,e){r.options[i]=e});else if("responsive"===n)for(t in s)if("array"!==i.type(r.options.responsive))r.options.responsive=[s[t]];else{for(e=r.options.responsive.length-1;e>=0;)r.options.responsive[e].breakpoint===s[t].breakpoint&&r.options.responsive.splice(e,1),e--;r.options.responsive.push(s[t])}l&&(r.unload(),r.reinit())},e.prototype.setPosition=function(){var i=this;i.setDimensions(),i.setHeight(),!1===i.options.fade?i.setCSS(i.getLeft(i.currentSlide)):i.setFade(),i.$slider.trigger("setPosition",[i])},e.prototype.setProps=function(){var i=this,e=document.body.style;i.positionProp=!0===i.options.vertical?"top":"left","top"===i.positionProp?i.$slider.addClass("slick-vertical"):i.$slider.removeClass("slick-vertical"),void 0===e.WebkitTransition&&void 0===e.MozTransition&&void 0===e.msTransition||!0===i.options.useCSS&&(i.cssTransitions=!0),i.options.fade&&("number"==typeof i.options.zIndex?i.options.zIndex<3&&(i.options.zIndex=3):i.options.zIndex=i.defaults.zIndex),void 0!==e.OTransform&&(i.animType="OTransform",i.transformType="-o-transform",i.transitionType="OTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(i.animType=!1)),void 0!==e.MozTransform&&(i.animType="MozTransform",i.transformType="-moz-transform",i.transitionType="MozTransition",void 0===e.perspectiveProperty&&void 0===e.MozPerspective&&(i.animType=!1)),void 0!==e.webkitTransform&&(i.animType="webkitTransform",i.transformType="-webkit-transform",i.transitionType="webkitTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(i.animType=!1)),void 0!==e.msTransform&&(i.animType="msTransform",i.transformType="-ms-transform",i.transitionType="msTransition",void 0===e.msTransform&&(i.animType=!1)),void 0!==e.transform&&!1!==i.animType&&(i.animType="transform",i.transformType="transform",i.transitionType="transition"),i.transformsEnabled=i.options.useTransform&&null!==i.animType&&!1!==i.animType},e.prototype.setSlideClasses=function(i){var e,t,o,s,n=this;if(t=n.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),n.$slides.eq(i).addClass("slick-current"),!0===n.options.centerMode){var r=n.options.slidesToShow%2==0?1:0;e=Math.floor(n.options.slidesToShow/2),!0===n.options.infinite&&(i>=e&&i<=n.slideCount-1-e?n.$slides.slice(i-e+r,i+e+1).addClass("slick-active").attr("aria-hidden","false"):(o=n.options.slidesToShow+i,t.slice(o-e+1+r,o+e+2).addClass("slick-active").attr("aria-hidden","false")),0===i?t.eq(t.length-1-n.options.slidesToShow).addClass("slick-center"):i===n.slideCount-1&&t.eq(n.options.slidesToShow).addClass("slick-center")),n.$slides.eq(i).addClass("slick-center")}else i>=0&&i<=n.slideCount-n.options.slidesToShow?n.$slides.slice(i,i+n.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):t.length<=n.options.slidesToShow?t.addClass("slick-active").attr("aria-hidden","false"):(s=n.slideCount%n.options.slidesToShow,o=!0===n.options.infinite?n.options.slidesToShow+i:i,n.options.slidesToShow==n.options.slidesToScroll&&n.slideCount-i<n.options.slidesToShow?t.slice(o-(n.options.slidesToShow-s),o+s).addClass("slick-active").attr("aria-hidden","false"):t.slice(o,o+n.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"));"ondemand"!==n.options.lazyLoad&&"anticipated"!==n.options.lazyLoad||n.lazyLoad()},e.prototype.setupInfinite=function(){var e,t,o,s=this;if(!0===s.options.fade&&(s.options.centerMode=!1),!0===s.options.infinite&&!1===s.options.fade&&(t=null,s.slideCount>s.options.slidesToShow)){for(o=!0===s.options.centerMode?s.options.slidesToShow+1:s.options.slidesToShow,e=s.slideCount;e>s.slideCount-o;e-=1)t=e-1,i(s.$slides[t]).clone(!0).attr("id","").attr("data-slick-index",t-s.slideCount).prependTo(s.$slideTrack).addClass("slick-cloned");for(e=0;e<o+s.slideCount;e+=1)t=e,i(s.$slides[t]).clone(!0).attr("id","").attr("data-slick-index",t+s.slideCount).appendTo(s.$slideTrack).addClass("slick-cloned");s.$slideTrack.find(".slick-cloned").find("[id]").each(function(){i(this).attr("id","")})}},e.prototype.interrupt=function(i){var e=this;i||e.autoPlay(),e.interrupted=i},e.prototype.selectHandler=function(e){var t=this,o=i(e.target).is(".slick-slide")?i(e.target):i(e.target).parents(".slick-slide"),s=parseInt(o.attr("data-slick-index"));s||(s=0),t.slideCount<=t.options.slidesToShow?t.slideHandler(s,!1,!0):t.slideHandler(s)},e.prototype.slideHandler=function(i,e,t){var o,s,n,r,l,d=null,a=this;if(e=e||!1,!(!0===a.animating&&!0===a.options.waitForAnimate||!0===a.options.fade&&a.currentSlide===i))if(!1===e&&a.asNavFor(i),o=i,d=a.getLeft(o),r=a.getLeft(a.currentSlide),a.currentLeft=null===a.swipeLeft?r:a.swipeLeft,!1===a.options.infinite&&!1===a.options.centerMode&&(i<0||i>a.getDotCount()*a.options.slidesToScroll))!1===a.options.fade&&(o=a.currentSlide,!0!==t?a.animateSlide(r,function(){a.postSlide(o)}):a.postSlide(o));else if(!1===a.options.infinite&&!0===a.options.centerMode&&(i<0||i>a.slideCount-a.options.slidesToScroll))!1===a.options.fade&&(o=a.currentSlide,!0!==t?a.animateSlide(r,function(){a.postSlide(o)}):a.postSlide(o));else{if(a.options.autoplay&&clearInterval(a.autoPlayTimer),s=o<0?a.slideCount%a.options.slidesToScroll!=0?a.slideCount-a.slideCount%a.options.slidesToScroll:a.slideCount+o:o>=a.slideCount?a.slideCount%a.options.slidesToScroll!=0?0:o-a.slideCount:o,a.animating=!0,a.$slider.trigger("beforeChange",[a,a.currentSlide,s]),n=a.currentSlide,a.currentSlide=s,a.setSlideClasses(a.currentSlide),a.options.asNavFor&&(l=(l=a.getNavTarget()).slick("getSlick")).slideCount<=l.options.slidesToShow&&l.setSlideClasses(a.currentSlide),a.updateDots(),a.updateArrows(),!0===a.options.fade)return!0!==t?(a.fadeSlideOut(n),a.fadeSlide(s,function(){a.postSlide(s)})):a.postSlide(s),void a.animateHeight();!0!==t?a.animateSlide(d,function(){a.postSlide(s)}):a.postSlide(s)}},e.prototype.startLoad=function(){var i=this;!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.hide(),i.$nextArrow.hide()),!0===i.options.dots&&i.slideCount>i.options.slidesToShow&&i.$dots.hide(),i.$slider.addClass("slick-loading")},e.prototype.swipeDirection=function(){var i,e,t,o,s=this;return i=s.touchObject.startX-s.touchObject.curX,e=s.touchObject.startY-s.touchObject.curY,t=Math.atan2(e,i),(o=Math.round(180*t/Math.PI))<0&&(o=360-Math.abs(o)),o<=45&&o>=0?!1===s.options.rtl?"left":"right":o<=360&&o>=315?!1===s.options.rtl?"left":"right":o>=135&&o<=225?!1===s.options.rtl?"right":"left":!0===s.options.verticalSwiping?o>=35&&o<=135?"down":"up":"vertical"},e.prototype.swipeEnd=function(i){var e,t,o=this;if(o.dragging=!1,o.swiping=!1,o.scrolling)return o.scrolling=!1,!1;if(o.interrupted=!1,o.shouldClick=!(o.touchObject.swipeLength>10),void 0===o.touchObject.curX)return!1;if(!0===o.touchObject.edgeHit&&o.$slider.trigger("edge",[o,o.swipeDirection()]),o.touchObject.swipeLength>=o.touchObject.minSwipe){switch(t=o.swipeDirection()){case"left":case"down":e=o.options.swipeToSlide?o.checkNavigable(o.currentSlide+o.getSlideCount()):o.currentSlide+o.getSlideCount(),o.currentDirection=0;break;case"right":case"up":e=o.options.swipeToSlide?o.checkNavigable(o.currentSlide-o.getSlideCount()):o.currentSlide-o.getSlideCount(),o.currentDirection=1}"vertical"!=t&&(o.slideHandler(e),o.touchObject={},o.$slider.trigger("swipe",[o,t]))}else o.touchObject.startX!==o.touchObject.curX&&(o.slideHandler(o.currentSlide),o.touchObject={})},e.prototype.swipeHandler=function(i){var e=this;if(!(!1===e.options.swipe||"ontouchend"in document&&!1===e.options.swipe||!1===e.options.draggable&&-1!==i.type.indexOf("mouse")))switch(e.touchObject.fingerCount=i.originalEvent&&void 0!==i.originalEvent.touches?i.originalEvent.touches.length:1,e.touchObject.minSwipe=e.listWidth/e.options.touchThreshold,!0===e.options.verticalSwiping&&(e.touchObject.minSwipe=e.listHeight/e.options.touchThreshold),i.data.action){case"start":e.swipeStart(i);break;case"move":e.swipeMove(i);break;case"end":e.swipeEnd(i)}},e.prototype.swipeMove=function(i){var e,t,o,s,n,r,l=this;return n=void 0!==i.originalEvent?i.originalEvent.touches:null,!(!l.dragging||l.scrolling||n&&1!==n.length)&&(e=l.getLeft(l.currentSlide),l.touchObject.curX=void 0!==n?n[0].pageX:i.clientX,l.touchObject.curY=void 0!==n?n[0].pageY:i.clientY,l.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(l.touchObject.curX-l.touchObject.startX,2))),r=Math.round(Math.sqrt(Math.pow(l.touchObject.curY-l.touchObject.startY,2))),!l.options.verticalSwiping&&!l.swiping&&r>4?(l.scrolling=!0,!1):(!0===l.options.verticalSwiping&&(l.touchObject.swipeLength=r),t=l.swipeDirection(),void 0!==i.originalEvent&&l.touchObject.swipeLength>4&&(l.swiping=!0,i.preventDefault()),s=(!1===l.options.rtl?1:-1)*(l.touchObject.curX>l.touchObject.startX?1:-1),!0===l.options.verticalSwiping&&(s=l.touchObject.curY>l.touchObject.startY?1:-1),o=l.touchObject.swipeLength,l.touchObject.edgeHit=!1,!1===l.options.infinite&&(0===l.currentSlide&&"right"===t||l.currentSlide>=l.getDotCount()&&"left"===t)&&(o=l.touchObject.swipeLength*l.options.edgeFriction,l.touchObject.edgeHit=!0),!1===l.options.vertical?l.swipeLeft=e+o*s:l.swipeLeft=e+o*(l.$list.height()/l.listWidth)*s,!0===l.options.verticalSwiping&&(l.swipeLeft=e+o*s),!0!==l.options.fade&&!1!==l.options.touchMove&&(!0===l.animating?(l.swipeLeft=null,!1):void l.setCSS(l.swipeLeft))))},e.prototype.swipeStart=function(i){var e,t=this;if(t.interrupted=!0,1!==t.touchObject.fingerCount||t.slideCount<=t.options.slidesToShow)return t.touchObject={},!1;void 0!==i.originalEvent&&void 0!==i.originalEvent.touches&&(e=i.originalEvent.touches[0]),t.touchObject.startX=t.touchObject.curX=void 0!==e?e.pageX:i.clientX,t.touchObject.startY=t.touchObject.curY=void 0!==e?e.pageY:i.clientY,t.dragging=!0},e.prototype.unfilterSlides=e.prototype.slickUnfilter=function(){var i=this;null!==i.$slidesCache&&(i.unload(),i.$slideTrack.children(this.options.slide).detach(),i.$slidesCache.appendTo(i.$slideTrack),i.reinit())},e.prototype.unload=function(){var e=this;i(".slick-cloned",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove(),e.$nextArrow&&e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove(),e.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},e.prototype.unslick=function(i){var e=this;e.$slider.trigger("unslick",[e,i]),e.destroy()},e.prototype.updateArrows=function(){var i=this;Math.floor(i.options.slidesToShow/2),!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&!i.options.infinite&&(i.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),i.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===i.currentSlide?(i.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),i.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):i.currentSlide>=i.slideCount-i.options.slidesToShow&&!1===i.options.centerMode?(i.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),i.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):i.currentSlide>=i.slideCount-1&&!0===i.options.centerMode&&(i.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),i.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},e.prototype.updateDots=function(){var i=this;null!==i.$dots&&(i.$dots.find("li").removeClass("slick-active").end(),i.$dots.find("li").eq(Math.floor(i.currentSlide/i.options.slidesToScroll)).addClass("slick-active"))},e.prototype.visibility=function(){var i=this;i.options.autoplay&&(document[i.hidden]?i.interrupted=!0:i.interrupted=!1)},i.fn.slick=function(){var i,t,o=this,s=arguments[0],n=Array.prototype.slice.call(arguments,1),r=o.length;for(i=0;i<r;i++)if("object"==typeof s||void 0===s?o[i].slick=new e(o[i],s):t=o[i].slick[s].apply(o[i].slick,n),void 0!==t)return t;return o}});
;
jQuery(document).ready(function ($) {

  $('.companies .companies-slider').slick({
    infinite: true,
    speed: 300,
    slidesToShow: 4,
    slidesToScroll: 1,
    prevArrow: false,
    nextArrow: false,
    autoplay: true,
    autoplaySpeed: 2000,
    prevArrow: '<button type="button" class="left-btn" aria-label="previous slide"></button>',
    nextArrow: '<button type="button" class="right-btn" aria-label="next slide"></button>',
    responsive: [
      {
        breakpoint: 650,
        settings: {
          slidesToShow: 3,
          slidesToScroll: 1
        }
      },
    ],
  });

  $('.last-offers-wrapper').slick({
    infinite: true,
    speed: 300,
    slidesToShow: 3,
    slidesToScroll: 1,
    prevArrow: false,
    nextArrow: false,
    autoplay: true,
    autoplaySpeed: 2500,
    variableWidth: true,


    // centerMode: true,
    dots: true,
    appendDots: $('.last-offers-scrollbar'),
    responsive: [
      {
        breakpoint: 900,
        settings: {
          slidesToShow: 2,
          slidesToScroll: 1,
        }
      },
      {
        breakpoint: 600,
        settings: {
          slidesToShow: 1,
          slidesToScroll: 1,
          centerMode: true,
        }
      },
    ],
  });
});
;
jQuery(document).ready(function ($) {
    const btnMenu = document.getElementById("btn-menu");
    const navTop = document.getElementById("mobile-menu");
    const activePage = document.querySelector(".nav-top-main .accordeon-header.active");
    const currentPage = document.querySelector(".nav-top-main .accordeon-header.current");

    btnMenu?.addEventListener("click", () => {

        if (activePage) {
            activePage.classList.add("current");
            if(currentPage) {
                accordeon(currentPage);
            }
        }

        navTop.classList.toggle("opened");
        document.body.classList.toggle("hidden");
        btnMenu.classList.toggle("opened");
    });

    /* *********************************************************************************************************** */
    //accordeon
    const allAccordeonHeader = document.querySelectorAll(".accordeon-header");
    allAccordeonHeader?.forEach(header => {
        header.addEventListener("click", (e) => {
            const accordeonInner = header.closest(".accordeon-inner");
            const navTop = header.closest(".nav-top");

            if (accordeonInner) {
                e.preventDefault();
            }

            if (navTop && window.innerWidth > 1280
                || header.classList.contains("current") && e.target.classList.contains("withicon")) {
                    return false;
            }

            header.classList.toggle("active");
            accordeon(header);
        });
        const activeElement = header.nextElementSibling?.querySelectorAll(".checked, .active");
        if (activeElement && activeElement.length > 0) {
            header.classList.add("active");
        }
        accordeon(header);
    });

    function accordeon(header) {
        const body = header.nextElementSibling;

        if (header.classList.contains("active")) {
            const bodyScrollHeight = body.scrollHeight;
            body.style.height = bodyScrollHeight + "px";

            const accordeonInner = header.closest(".accordeon-inner");
            if(accordeonInner) {
                const accordeonOutter = accordeonInner.closest(".accordeon-body");
                const outterHeight = accordeonOutter.scrollHeight;
                accordeonOutter.style.height = outterHeight + bodyScrollHeight + "px";
            }
        } else {
            body.style.height = null;
        }
    }
    /* *********************************************************************************************************** */
    function showPreview(inputId) {
        const input = document.getElementById(inputId);
        const formFile = input.closest(".form-file");
        const preview = formFile.querySelector(".placeholder");
        const fileName = formFile.querySelector(".file-name");

        const file = input.files[0];

        formFile?.classList.add("uploaded");

        if (file) {
            const reader = new FileReader();
            const fileType = file.type;

            reader.onload = function (e) {
                if (preview) {

                    if (fileType.includes("image/")) {
                        preview.src = e.target.result;
                    } else if (fileType === "application/pdf") {
                        preview.src = "../img/icon/attached-cv.svg";
                    }
                }
            }

            reader.onerror = function () {
                console.error("File reading failed");
            };

            reader.readAsDataURL(file);

            fileName.textContent = `${file.name} (${fileSize(file.size)})`;
            fileName.classList.add("added");
        }
    }

    function fileSize(number) {
    if (number < 1024) {
        return `${number} bytes`;
    } else if (number >= 1024 && number < 1048576) {
        return `${(number / 1024).toFixed(1)} KB`;
    } else if (number >= 1048576) {
        return `${(number / 1048576).toFixed(1)} MB`;
    }
    }


    // const revokeButtons = document.querySelectorAll(".revokezzzzzzz");
    // revokeButtons?.forEach(btn => {
    //     btn?.addEventListener("click", (e) => {
    //         e.preventDefault();
    //         const formFile = btn.closest(".form-file");
    //         const preview = formFile.querySelector(".placeholder");
    //         const fileName = formFile.querySelector(".file-name");
    //         const input = formFile.querySelector(".file-input");

    //         fileName.textContent = "";
    //         if(preview.classList.contains("grey")) {
    //              preview.src = "../img/icon/upload-file.svg";
    //         } else {
    //             preview.src = "../img/icon/upload.png";
    //         }
    //         formFile.classList.remove("uploaded");
    //         input.value = null;
    //         // input.files = [];

    //     })
    // });

    /* *********************************************************************************************************** *

    /* ***** */
    const fillingFormMutation = (mutationsList, observer) => {
        for (let mutation of mutationsList) {
            if (mutation.type == "childList") {
                clearTimeout(observer.timeout);
                observer.timeout = setTimeout(() => {
                    const inputDate = document.querySelector(".form-item-field-candidat-date-naissance-date input");
                    const inputTel = document.querySelector(".intl-tel-input input.phone");
                    const inputFile = document.querySelector(".form-field.form-file .file-size");
                    inputFile?.closest(".form-file").classList.add("uploaded");
                    inputDate?.value && inputDate?.focus();
                    /* *** */
                    if(inputTel) {
                        const form = inputTel.closest(".card-block-content");
                        const dialCode = form.getAttribute("dialCode");
                        if (dialCode && !form.querySelector(".form-field .selected-dial-code").innerText) {
                            form.querySelector(".flag-container .selected-flag").click();
                            form.querySelectorAll("#country-listbox li").forEach(item => {
                               if (item.dataset.dialCode == dialCode.slice(1)) {
                                   item.click();
                               }
                           })
                       }
                    }
                }, 500);
            }
        }
    };

    const observerInputs = new MutationObserver(fillingFormMutation);
    document.querySelectorAll("div[id^='emacandidature-express-application-multistep-wrapper'], .card-block-content")?.forEach(block => {
        observerInputs?.observe(block, { attributes: true, childList: true, subtree: true });
    });

    document.querySelector("div[id^='emacandidature-express-application-multistep-wrapper'] .block-links")?.addEventListener("mouseenter", (e) => {
        const form = e.target.closest(".card-block-content");
        if (!form.getAttribute("dialCode")) {
            // const title = form.querySelector(".form-field .selected-flag")?.getAttribute("title");
            // const country = form.querySelector(".form-field .iti-flag")?.classList[1];
            const dialCode = form.querySelector(".form-field .selected-dial-code")?.innerText;
            // const phoneAttributes = `${title},${country},${dialCode}`;
            form.setAttribute("dialCode", dialCode);
        }
    });

    document.querySelector("#user-login input#edit-pass")?.focus();
    document.querySelector("#user-login input#edit-name")?.focus();
// ***************************************************************************************
    const placeholderHasChanged = (mutationsList, observer) => {
        for (let mutation of mutationsList) {
            if (mutation.type == "attributes") {
                const input = mutation.target;
                const label = input.closest(".form-field").querySelector("label");
                clearTimeout(observer.timeout);
                observer.timeout = setTimeout(() => {
                    if(label) {
                        label.innerText = input.placeholder;
                    }
                }, 500);
            }
        }
    };

    const observerInputTel = new MutationObserver(placeholderHasChanged);
    document.querySelectorAll(".phone")?.forEach(input => {
        observerInputTel?.observe(input, { attributes: true });
    });
    /* *********************************************************************************************************** */
    // remove alert on annotation-form
    const annotateFormHasAlertAdded = (mutationsList, observer) => {
        for (let mutation of mutationsList) {
            if (mutation.type == "childList") {
                clearTimeout(observer.timeout);
                observer.timeout = setTimeout(() => {
                    const alert = document.querySelector(".profile-btn-annotations .alert");
                    if(alert) {
                        alert.remove();
                    }
                }, 4000);
            }
        }
    };

    const observerAnnotateForm = new MutationObserver(annotateFormHasAlertAdded);
    document.querySelectorAll(".profile-btn-annotations")?.forEach(form => {
        observerAnnotateForm?.observe(form, { childList: true, subtree: true });
    });

    /* *********************************************************************************************************** */
    // Show/hide password
    const inputspassword = document.querySelectorAll(".form-field input[type='password']");
        inputspassword?.forEach((input) => {
            const btnShowPassword = input.closest(".form-field").querySelector(".icon.pswd");
            btnShowPassword?.addEventListener("click", () => {
                if(btnShowPassword?.classList.contains("visible")) {
                    btnShowPassword?.classList.remove("visible")
                    input.setAttribute("type", "password");
                } else if(!btnShowPassword?.classList.contains("visible")){
                    btnShowPassword?.classList.add("visible")
                    input.setAttribute("type", "text");
                }
            })
        });

    /* *********************************************************************************************************** */
    // formulaire changer identifiant de connexion
    const inputChangeEmail = document.getElementById("change-my-email");
    const inputChangePassword = document.getElementById("change-my-password");
    const formGroupConfirmation = document.getElementsByClassName("form-group-confirmation");
    const formGroupEmail = document.getElementsByClassName("form-group-email");
    const formGroupPassword = document.getElementsByClassName("form-group-password");

    function showHideFormGroup(formgroup, state, action = 'click') {
        state ? formgroup?.classList.add("show") : formgroup?.classList.remove("show");
        formgroup?.querySelectorAll("input, select").forEach((input) => {
            input.setAttribute("required",state);
            if(!state) {
                input.removeAttribute("required");
                input.value = "";
                input.nextElementSibling?.classList.remove("filled");
                if (input.id === "edit-mail") {
                    input.value = document.querySelector("#edit-initial-mail").value;
                    input.nextElementSibling?.classList.add("filled");
                }
            } else {
                if (input.id === "edit-mail" && action === 'click') {
                    input.value = "";
                    input.nextElementSibling?.classList.remove("filled");
                }
            }
        })
    }

    function showHideEvent(inputCheckbox, action) {
        if(inputCheckbox?.id === "change-my-email") {
                showHideFormGroup(formGroupEmail[0], inputCheckbox?.checked, action);
        }
        if(inputCheckbox?.id === "change-my-password") {
            showHideFormGroup(formGroupPassword[0], inputCheckbox?.checked);
        }

        if(inputCheckbox?.checked) {
            showHideFormGroup(formGroupConfirmation[0], true);
            showHideFormGroup(formGroupConfirmation[1], true);
            //  formGroupConfirmation.forEach((item) => {
            //     showHideFormGroup(item, false);
            // })
        } else if(!inputChangeEmail?.checked && !inputChangePassword?.checked) {
            showHideFormGroup(formGroupConfirmation[0], false);
            showHideFormGroup(formGroupConfirmation[1], false);
        }
    }

    [inputChangeEmail, inputChangePassword].map((inputCheckbox) => {
        inputCheckbox?.addEventListener("click", () => {
            showHideEvent(inputCheckbox, "click");
        });
        showHideEvent(inputCheckbox, "load");
    })

    // Formulaire de contact
    const btnCheckboxCandidat = document.getElementById("edit-submitted-contact-information-contact-role-1");
    const btnCheckboxRecruteur = document.getElementById("edit-submitted-contact-information-contact-role-2");

    if (btnCheckboxCandidat && btnCheckboxRecruteur) {
        const formGroupsCandidat = document.querySelectorAll(".form-contact-candidat");
        const formGroupsRecruteur = document.querySelectorAll(".form-contact-recruteur");
        [btnCheckboxCandidat, btnCheckboxRecruteur].map((inputCheckbox, idx) => {
            let formGroups = idx === 0 ? formGroupsCandidat : formGroupsRecruteur;

            showContactFormGroup(idx, formGroups, inputCheckbox.checked);
            inputCheckbox?.addEventListener("click", () => showContactFormGroup(idx, formGroups, inputCheckbox.checked, clicked = true));

        });
        function showContactFormGroup(idx, formGroups, state, clicked) {
            formGroups.forEach(formGroup => {
                showHideFormGroup(formGroup, state);
            });

            const blockContactInfo = document.querySelector(".page-contact-info.form-contact-recruteur");

            if (clicked) {
                if (idx === 0) {
                    formGroupsRecruteur.forEach(formGroup => {
                        showHideFormGroup(formGroup, false);
                    })
                    blockContactInfo.classList.remove("show");
                } else {
                    formGroupsCandidat.forEach(formGroup => {
                        showHideFormGroup(formGroup, false);
                    })
                    blockContactInfo.classList.add("show");
                }
            }
        }
    }

    /* *********************************************************************************************************** */
    // Dupliquer champ de formulaire
    const addAdsQuestion = document.getElementById("add-adsQuestion");
    const removeAdsQuestion = document.getElementById("remove-adsQuestion");
    const questionNumber = document.getElementsByClassName("question-number");

    function countNumberLine() {
        const nbr = document.querySelectorAll("#adsQuestions .form-group").length;
        return nbr;
    }

    addAdsQuestion?.addEventListener("click", (e) => {
        e.preventDefault();

        const formGroup = document.querySelector("#adsQuestions .form-group");
        const formGroupWrapper = document.querySelector("#adsQuestions ul.form-group-item");
        const itemNumber = document.querySelectorAll("#adsQuestions .form-group").length

        addFormFields(formGroupWrapper, formGroup, itemNumber, 5);
    });

    const allAddCursus = document.querySelectorAll(".cursus-add");
    allAddCursus?.forEach(btn => {
        btn.addEventListener("click", (e) => {
            e.preventDefault();
            const formGroupWrapper = btn.closest(".cursus-section").querySelector(".cursus-container");
            const formGroup = formGroupWrapper.querySelector(".cursus-section-item");
            const itemNumber = formGroupWrapper.querySelectorAll(".cursus-section-item").length
            addFormFields(formGroupWrapper, formGroup,itemNumber, 5);
            // Add remove event on new element added
            // removeCursus();
        });
    });

    function addFormFields(formGroupWrapper, formGroup, lineNumber, limit) {
        if(lineNumber >= limit) {
            return false;
        };

        const newEntry = formGroup?.cloneNode(true);
        newEntry.querySelectorAll(".question-number")?.forEach(item => {
            item.textContent = lineNumber+1;
        });
        newEntry.querySelectorAll("input, select, textarea").forEach(input => {
            if(input.type === "checkbox") {
                input.checked = false;
                return false;
            }
            input.value = '';
            input.id = input.id + "-" + lineNumber;
            input.name = input.name + "-" + lineNumber;
            input.nextElementSibling.setAttribute("for", input.id);
            input.required = true;
        });

        formGroupWrapper?.appendChild(newEntry);
    }

    function generateNewLabelOnInputs(allFormGroup) {
        allFormGroup?.forEach((formGroup, idx) => {
            formGroup.querySelectorAll("input[type='text'], select, textarea").forEach((input) => {
                const label = input.id.split("-")[0] + "-" + (idx+1);
                input.id = label;
                input.name = label;
                input.nextElementSibling.setAttribute("for", input.id);
            });
            formGroup.querySelectorAll(".question-number")?.forEach(item => {
                item.textContent = idx+1;
            });
        });
    }

    removeAdsQuestion?.addEventListener("click", (e) => {
        e.preventDefault();

        const itemNumber = document.querySelectorAll("#adsQuestions .form-group").length
        const checkboxes = document.querySelectorAll(".remove-ads-question");
        checkboxes.forEach((checkbox) => {
            if(itemNumber == 1) {
                return false;
            };

            if(checkbox.checked) {
                checkbox.closest(".form-group").remove();
            }
        });
        const allFormGroup = document.querySelectorAll("#adsQuestions .form-group");
        generateNewLabelOnInputs(allFormGroup)
        // document.querySelectorAll("#adsQuestions .form-group").forEach((questionsGroup, idx) => {
        //     questionsGroup.querySelectorAll("input[type='text'], select, textarea").forEach((input) => {
        //         const label = input.id.split("-")[0] + "-" + (idx+1);
        //         input.id = label;
        //         input.name = label;
        //         input.nextElementSibling.setAttribute("for", input.id);
        //     });
        //     questionsGroup.querySelectorAll(".question-number").forEach(item => {
        //         item.textContent = idx+1;
        //     });
        // });
    });

    // confirm("Voulez vous vraiment supprimé cette ligne");

    // function removeCursus() {
        const AllCursusRemove = document.querySelectorAll(".cursus-container");
        AllCursusRemove?.forEach(container => {
            container.addEventListener("click", (e) => {
                if(e.target.classList.contains("cursus-remove")) {
                    const allCursus = container.querySelectorAll(".cursus-section-item");
                    const cursus = e.target.closest(".cursus-section-item");
                    const itemNumber = allCursus.length;

                    if(itemNumber === 1) {
                        return false;
                    };
                    cursus.remove();
                    generateNewLabelOnInputs(allCursus);
                }
            })
        });
    // };

    /* *********************************************************************************************************** */
    // afficher / cacher block element de formulaire
    function showHiddenFormFields(checkbox, block, inverted) {
        const className = inverted ? "hide" : "show"
        checkbox?.addEventListener("click", () => {
            checkbox?.checked ? block?.classList.add(className) : block?.classList.remove(className);

            block?.querySelectorAll("input[type='text'], input[type='email'], input[type='file'], select").forEach(input => {
                if(className === "show") {
                    input?.setAttribute("required", checkbox.checked);
                } else {
                    input.removeAttribute("required");
                }
            });
        });
    }
    // block des questions à poser au candidat
    const showQuestion = document.getElementById("showQuestion");
    const adsQuestions = document.getElementById("adsQuestions");
    showHiddenFormFields(showQuestion, adsQuestions);
    // when there is an ajax call
    showQuestion?.addEventListener("click", (e) => {
        // if(!adsQuestions.style.display) {
        //     return false
        // };
        const adsQuestions = document.getElementById("adsQuestions");
        if(e.target.checked) {
            adsQuestions.style.display = "flex";
        } else {
            adsQuestions.style.display = "none";
        }
    });

    if(showQuestion?.checked) {
        adsQuestions.style.display = "flex";
    }

    // Block ajouter des emails à recevoir les candatures
    const addEmail = document.getElementById("addEmail");
    const blockEmail = document.getElementById("blockEmail");
    showHiddenFormFields(addEmail, blockEmail);

    // Block ajouter un autre CV
    const addNewResume = document.getElementById("addNewResume");
    const blockNewResume = document.getElementById("blockNewResume");
    showHiddenFormFields(addNewResume, blockNewResume);

    // Block cursus si aujourd'hui est coché
    const allCurrentDate = document.querySelectorAll(".current-date");
    allCurrentDate?.forEach(currentDate => {
        const cursusEnd = currentDate.closest(".cursus-period").querySelector(".cursus-end");
        showHiddenFormFields(currentDate, cursusEnd, "inverted");
        if(currentDate.checked) {
            cursusEnd.classList.add("hide");
        }
    });

    /* *********************************************************************************************************** */
    // FAQ animation
    document.querySelectorAll(".faq-item").forEach(item => {
        const faqHeader = item.querySelector(".faq-header");
        faqHeader?.addEventListener("click", (e) => {
            if(window.innerWidth > 900) {
                document.querySelector(".faq-item.active").classList.remove("active");
                e.target.closest(".faq-item").classList.add("active");

                const faqContent = document.querySelector(".faq-content");
                const height = faqContent.querySelector(".faq-item.active .faq-topics").scrollHeight;

                faqContent.style.height = height + "px";
            }
            if(window.innerWidth <= 900) {
                const faqBody = e.target.nextElementSibling;
                const height = faqBody.querySelector(".faq-topics").scrollHeight;
                e.target.closest(".faq-item").classList.toggle("show");
                if(e.target.closest(".faq-item").classList.contains("show")) {
                    faqBody.style.height = height + "px";
                } else {
                    faqBody.style.height = 0 + "px";
                }
            }
        });
    });
    setTimeout(() => {
        document.querySelector(".faq-item.active  .faq-header")?.click();
    }, 500);
    /* *********************************************************************************************************** */
    // tabs navigation
    const allTabsNav = document.querySelectorAll(".tabs-navigation a");
    allTabsNav?.forEach((btn, navIdx) => {
        btn?.addEventListener("click", (e) => {
            e.preventDefault();
            const target = e.target;
            const tabsContainer = target.closest(".tabs");
            const applicationProfile = target.closest(".applications-profile");
            tabsContainer.querySelector(".tabs-navigation-item.active")?.classList.remove("active");
            target.closest(".tabs-navigation-item")?.classList.add("active");

            let currentTabs;
            const siblings = target.closest(".tabs-navigation").querySelectorAll(".tabs-navigation-item");
            siblings.forEach((item, tabIdx) => {
                if(item.classList.contains("active")){
                    currentTabs = tabIdx;
                }
            });

            if(applicationProfile) {
                if(currentTabs === 0) {
                    applicationProfile.classList.remove("preview-mode");
                } else if(currentTabs === 1) {
                    applicationProfile.classList.add("preview-mode");
                }
            }

            const AllTabs = tabsContainer.querySelectorAll(".tabs-content-item");
            AllTabs?.forEach((item, idx) => {
                if(currentTabs === idx) {
                    item.classList.add("active");
                } else {
                    item.classList.remove("active");
                }
            });
        });
    });
    /****************/
    const AllTabs = document.querySelectorAll(".tabs .tabs-navigation");
    AllTabs?.forEach((item, k) => {
        item.addEventListener("mouseup", (e) => {
            if(e.target.tagName === "A") {
                const li = e.target.closest("li")
                if (Array.from(li.parentNode.children).indexOf(li) === 1) {
                    localStorage.setItem("preview-mode", true);
                } else if (Array.from(li.parentNode.children).indexOf(li) === 0) {
                    localStorage.setItem("preview-mode", false);
                }
            }
        });

        if (localStorage.getItem("preview-mode") == "true" ) {
            document.querySelector(".applications-profile")?.classList.add("preview-mode");
        }
    });
    /****************/
    // console.log(history);
    // tabs profile
    const applicationsProfile = document.querySelectorAll(".applications-profile-item");
    applicationsProfile?.forEach((profile, idx) => {
        if(idx===0) {
            profile.classList.add("active-profile");
        }

        profile?.addEventListener("click", () => {
            document.querySelector(".applications-profile-item.active-profile")?.classList.remove("active-profile");
            profile.classList.add("active-profile");

            if (window.innerWidth < 1180) {
                profile.scrollIntoView({ behavior: 'smooth', block: 'start' });
                return false;
            }

            const container = profile.closest(".applications-profile");

            let itemTop = profile.offsetTop;
            if(profile.closest("table")) {
                itemTop = profile.closest("tr").offsetTop + 10;
            }
            const itemHeight = profile.offsetHeight;
            const containerHeight = container.clientHeight;

            const scrollPosition = itemTop - (containerHeight / 2) + (itemHeight / 2);

            container.scroll({
                top: scrollPosition,
                behavior: 'smooth'
            });
        });
    });
    const tabsPagination = document.querySelectorAll(".tabs-footer .pagination a");
    tabsPagination?.forEach(button => {
        button?.addEventListener("click", (e) => {
            e.preventDefault();
            const activeProfile = document.querySelector(".applications-profile-item.active-profile");
            const profileNumbr = document.querySelectorAll(".applications-profile-item").length;

            let prevProfile, nextProfile;

            if (activeProfile.nextElementSibling?.classList.contains("applications-profile-item") || activeProfile.previousElementSibling?.classList.contains("applications-profile-item")) {

                if(button.classList.contains("pagination-next") && activeProfile.nextElementSibling) {
                    activeProfile.nextElementSibling?.click();
                    // activeProfile.nextElementSibling?.classList.add("active-profile");
                    // activeProfile.classList.remove("active-profile");
                } else if(button.classList.contains("pagination-prev") && activeProfile.previousElementSibling) {
                    activeProfile.previousElementSibling?.click();
                    // activeProfile.previousElementSibling?.classList.add("active-profile");
                    // activeProfile.classList.remove("active-profile");
                }
            } else {
                const activeBlock = activeProfile.closest("tr");
                if (button.classList.contains("pagination-next") && activeBlock.nextElementSibling.nextElementSibling) {
                    activeBlock.nextElementSibling.nextElementSibling?.querySelector(".applications-profile-item").click();
                    // activeBlock.nextElementSibling.nextElementSibling?.querySelector(".applications-profile-item").classList.add("active-profile");
                    // activeProfile.classList.remove("active-profile");
                } else if (button.classList.contains("pagination-prev") && activeBlock.previousElementSibling.previousElementSibling) {
                    activeBlock.previousElementSibling.previousElementSibling?.querySelector(".applications-profile-item").click();
                    // activeBlock.previousElementSibling.previousElementSibling?.querySelector(".applications-profile-item").classList.add("active-profile");
                    // activeProfile.classList.remove("active-profile");
                }
            }

        });
    });

    const tabsNavItems = document.querySelectorAll(".tabs-navigation-item a, .tabs-zoom a, .applications-list .pagination a, .applications-profile-item");
    tabsNavItems?.forEach(item => {
        item.addEventListener("click", (e) => {
            const container = item.closest(".applications-list");
            if(container.getBoundingClientRect().top === 0) {
                return false;
            }
            container?.scrollIntoView();
        })
    });

    /* *********************************************************************************************************** */
    // Modal
    const modalDismiss = document.querySelectorAll(".modal-dismiss, .btn-dismiss");
    modalDismiss?.forEach(item => {
        item.addEventListener("click", (e) => {
            e.target.closest(".modal").classList.remove("show");
            document.body.classList.remove("hidden")
        })
    });

    function showModal(modal) {
        document.body.classList.add("hidden");
        modal?.classList.add("show");
    }

    const showAdsInfo = document.querySelector("#show-ads-type-info");
    const showCvthequeInfo = document.querySelector("#show-cvtheque-info");

    [showAdsInfo, showCvthequeInfo].forEach((btn, idx) => {
        const adsInfo = document.querySelector("#ads-type-info");
        const cvthequeInfo = document.querySelector("#cvtheque-info");

        const params = [adsInfo, cvthequeInfo]
        btn?.addEventListener("click", (e) => {
            e.preventDefault();
            showModal(params[idx]);
        })
    });

    const questionType = document.querySelector("#questionType");
    questionType?.addEventListener("change", (e) => {
        const questionTypeInfo = document.querySelector("#questionTypeInfo");
        if (questionTypeInfo && e.target.value == 2) {
            showModal(questionTypeInfo);
        }
    });

    /* *********************************************************************************************************** */
    //Zoom plus/moins page gestion candidatures
    const zoomButtons = document.querySelectorAll(".tabs-zoom a");
    zoomButtons?.forEach(button => {
        let maxWidth = 900;
        if (document.body.clientWidth > 1900) {
            maxWidth = 1100;
        }
        button?.addEventListener("click", (e) => {
            e.preventDefault();
            const allZoomable = document.querySelectorAll(".zoomable");
            let margin = 0;
            if (e.target.classList.contains("zoom-more")) {
                margin = "-22rem";
            } else if (e.target.classList.contains("zoom-less")) {
                margin = 0;
            }
            allZoomable.forEach(zoomable => {
                zoomable.style.marginLeft = margin;
            });
        });
    });
    /* *********************************************************************************************************** */
    // Afficher/Cacher resumé dans recherche offre
    const allCardJobDescriptionLink = document.querySelectorAll(".card-job-description a");
    allCardJobDescriptionLink?.forEach(button => {
        button?.addEventListener("click", (e) => {
            e.preventDefault();
            const parentElement = e.target.parentElement;
            parentElement.classList.toggle("full-text");

            if(document.body.classList.contains("i18n-fr")) {
                e.target.textContent ="moins";
            } else {
                e.target.textContent = "less";
            }
            // e.target.classList.toggle("less");
            if (!parentElement.classList.contains("full-text")){
                e.target.textContent = "+plus";
            }
        });
    });

    /* *********************************************************************************************************** */
    // Show floating recruteurbuttons
    const showFloatingButtons = document.querySelector(".btn.btn-hider");
    showFloatingButtons?.addEventListener("click", (e) => {
        e.preventDefault();
        showFloatingButtons?.closest(".fixed-btn-wrapper").classList.toggle("visible");
    });
    /* *********************************************************************************************************** */
    // Remonter en haut
    const ScrollTopButton = document.querySelector("#scrollTop");
    ScrollTopButton?.addEventListener("click", () => {
        document.documentElement.scrollTop = 0;

    });

    let lastNiveau = 0;
    const header = document.querySelector("header");

    window.onscroll = () => {
        if (document.documentElement.scrollTop > 495) {
            ScrollTopButton?.classList.add("show");
        } else {
            ScrollTopButton?.classList.remove("show");
        }

        const niveau = document.documentElement.scrollTop;

        if( lastNiveau > niveau && !header.classList.contains("whenScrollUp") ) {
            header.classList.add("whenScrollUp")
        } else if (lastNiveau < niveau && header.classList.contains("whenScrollUp")) {
            header.classList.remove("whenScrollUp");
        }
        lastNiveau = niveau;
    }

    /* *********************************************************************************************************** */
    //Redirection vers le lien des data href
    const allDataHref = document.querySelectorAll("[data-href]");
    allDataHref?.forEach(element => {
        element.addEventListener("click", (e) => {
            if(e.target.tagName === "A") {
                return false;
            }
            window.location = element.dataset.href;
        });
    });
    /* *********************************************************************************************************** */
    //Rendre la premiere option des selects non cliquable s'il ya l'attribut required
    const allSelectInput = document.querySelectorAll(".form-field select");
    allSelectInput?.forEach(select => {
        if (select.required && !select.getAttribute("multiple")) {
            select[0].setAttribute("disabled", true);
        }
    });

    /* *********************************************************************************************************** */
    // Form validation
    const buttonSubmit = document.querySelector(".form .btn-primary[type='submit']");
    let formValidationError = [];
    buttonSubmit?.addEventListener("click", (e) => {
        const form = buttonSubmit.closest(".form");

        Array.from(form).map(input => {
            if (!input.required) {
                return false;
            }

            if (!input.validity.valid || input.type === "email" && input.validity.typeMismatch) {
                input.classList.add("error");
                const formError = input.closest(".form-group-item").querySelector(".form-error");
                if(formError) {
                    formError.innerText = Drupal.t(input.validationMessage);
                    if(input.type === "file" && formError.classList.contains("d-none")) {
                        formError.classList.remove("d-none");
                    }
                    input.focus();
                }
                formValidationError.push(true);
            } else {
                formValidationError.push(false);
            }

        });

        const formErrors = form.querySelectorAll(".form-error");
        let thereIsAnError = false;
        formErrors.forEach(firstError => {
            if (firstError.textContent != "" && !thereIsAnError) {
                if(!firstError.classList.contains("d-none")) {
                    thereIsAnError = true;
                    firstError.scrollIntoView({ block: "center" });
                }
            }
        });

        if(formValidationError) {
            let valid = formValidationError.filter(item => item === true );

            if(valid.length === 0 ) {
                form.submit();
            } else {
                e.preventDefault();
                formValidationError = [];
                return false;
            }
        }
    });

    /* *********************************************************************************************************** */
    function setInputPhoneIntoIntTel() {
        // every input with phone classe
        let inputs = document.querySelectorAll(".phone");

        Array.from(inputs).map(input => {
            if(input.classList.contains("intlTelInputIsSet")) {
                return false;
            }

            const iti = window.intlTelInput(input, {
                separateDialCode: true,
                excludeCountries: ["is", "eh"],
                preferredCountries: [],
                initialCountry: "auto",
                formatOnDisplay: true,
                utilsScript: "/sites/all/themes/africawork3/js/utils.js?1585994360633",
                customPlaceholder: function (selectedCountryPlaceholder, selectedCountryData) {
                    const label = input.closest(".form-field").querySelector("label");
                    const placeholder = `Tel (ex: ${selectedCountryPlaceholder}) `;
                    if (label) {
                        label.innerText = placeholder;
                        if (input.required) {
                            label.classList.add("required");
                        }
                    }
                    return placeholder;
                },
                geoIpLookup: function (callback) {
                    var current_value = input.value;
                    input.value = "";  // unset the value before checking geoip
                    $.get(Drupal.settings.africawork3.geoip, function () { }, "json").always(function (resp) {
                        var countryCode = (resp && resp.iso_code) ? resp.iso_code : "";
                        if (!$.trim(current_value)) {
                            callback(countryCode);
                        } else {
                            let hiddenInput1 = document.querySelector("#intphone1");
                            let codePays1 = document.querySelector("#countrycode1");
                            let hiddenInput2 = document.querySelector("#intphone2");
                            let codePays2 = document.querySelector("#countrycode2");

                            document.querySelectorAll(".phone").forEach((inphone, idx) => {
                                const itiFlag = inphone.closest(".intl-tel-input").querySelector(".iti-flag")?.classList;

                                if (itiFlag.length == 2) {
                                    if(idx == 0) {
                                        let codePays = itiFlag[1];
                                        hiddenInput1.value = inphone.defaultValue;
                                        codePays1.value = codePays;
                                    } else if(idx == 1) {
                                        let codePays = itiFlag[1];
                                        hiddenInput2.value = inphone.defaultValue;
                                        codePays2.value = codePays;
                                    }
                                }
                            });
                        }
                        setTimeout(function () {
                            input.value = current_value;  // set value back after geoip is done.
                        }, 10);
                    });
                },
            });

            // here, the index maps to the error code returned from getValidationError - see readme
            var errorMap = [Drupal.t("Invalid number"), Drupal.t("Invalid country code"), Drupal.t("Too short number"), Drupal.t("Too long number"), Drupal.t("Invalid number")];

            // on blur: validate
            input.addEventListener('blur', phoneValidationCheck);
            input.addEventListener('input', phoneValidationCheck);
            setTimeout((input) => {
                const countryList = input.closest(".intl-tel-input").querySelector("ul.country-list");
                countryList.addEventListener("click", (e) => {
                    if (e.target.closest(".country ").nodeName === "LI") {
                        setTimeout((input) => {
                            input.blur();
                            input.focus();
                        }, 50, input);
                    }
                });
            }, 1000, input);

            function phoneValidationCheck() {
                // reset();
                if (input.value.trim()) {
                    const formField = input.closest(".form-field");
                    const formError = formField.nextElementSibling;
                    let fullNumber, errorCode;

                    iti.options.nationalMode = true;
                    iti.options.separateDialCode = false;
                    if (iti.isValidNumber()) {
                        fullNumber = iti.getNumber();
                        formField.classList.remove("error");
                        formError.innerText = "";
                    } else {
                        formField.classList.add("error");
                        errorCode = iti.getValidationError();
                        formError.innerText = errorMap[errorCode];
                        fullNumber = "";
                    }
                    let hiddenInput, codePays;

                    document.querySelectorAll(".phone").forEach((inputTel, idx) => {
                        if (inputTel.id === input.id) {
                            if (idx === 0) {
                                hiddenInput = document.querySelector("#intphone1");
                                codePays = document.querySelector("#countrycode1");
                            } else {
                                hiddenInput = document.querySelector("#intphone2");
                                codePays = document.querySelector("#countrycode2");
                            }
                        }
                    })
                    codePays.value = iti.getSelectedCountryData().iso2 ? iti.getSelectedCountryData().iso2 : "";
                    hiddenInput.value = fullNumber ? fullNumber : errorCode;
                    // countrycode1.value = code1;
                    iti.options.nationalMode = false;
                    iti.options.separateDialCode = true;
                }
            }
            input.classList.add("intlTelInputIsSet");
            setTimeout(() => {
                if(input.value) {
                    const label = input.closest(".form-field").querySelector("label");
                    label && label.classList.add("filled");
                }
            }, 500);

        });
    }

    setInputPhoneIntoIntTel();

    const candidatureExpressHasChanged = (mutationsList, observer) => {
        for (let mutation of mutationsList) {
            if (mutation.type == "childList" && mutation.target.nodeName !="LABEL") {
                clearTimeout(observer.timeout);
                    observer.timeout = setTimeout(() => {
                    setInputPhoneIntoIntTel();
                }, 500);
            }
        }
    };

    const observerExpressApplication = new MutationObserver(candidatureExpressHasChanged);
    const formExpressApplication = document.querySelector("div[id^='form-express-application-content']");
    if(formExpressApplication) {
        observerExpressApplication?.observe(formExpressApplication, { childList: true, subtree: true, attributes: true });
    }


    /* *********************************************************************************************************** */

    // Select2 plugin
    // const customSelect = document.querySelector(".custom-select")
    // if (customSelect) {
    //   $(".custom-select").select2();
    // }

    $(".multiselect").each(function () {
        const title = $(this).data('title');
        $(this).multiselect({
            includeSelectAllOption: false,
            enableFiltering: true,
            filterBehavior: 'text',
            enableCaseInsensitiveFiltering: true,
            selectAllText: Drupal.t('Select all'),
            allSelectedText: Drupal.t('Select all'),
            nonSelectedText: title,
            filterPlaceholder: Drupal.t('Search'),
            nSelectedText: Drupal.t('Selected'),
            collapseOptGroupsByDefault: true,
            enableCollapsibleOptGroups: true,
            enableClickableOptGroups: false,
            buttonText: function (options, select) {
                let labels = [];
                options.each(function () {
                    let optgroupLabel = $(this).closest('optgroup').attr('label');
                    let optionLabel = $(this).text();
                    if (optgroupLabel) {
                        labels.push(optgroupLabel + ' > ' + optionLabel);
                    } else {
                        labels.push(optionLabel);
                    }
                });
                if (labels.length === 0) {
                    return title;
                }
                if (labels.length > 3) {
                    let numSelected = options.length;
                    return numSelected + ' ' + Drupal.t('Selected');
                }
                return labels.join(', ');
            }
        });
        if ($('.form-advanced-search .multiselect-group-option-indented-full.active').length) {
            $('.form-advanced-search .multiselect-group-option-indented-full.active').each(function () {
                let activeElement = $(this);

                // Find the previous multiselect-group
                let previousGroup = activeElement.prevAll('.multiselect-group').first();

                // Find the next multiselect-group
                let nextGroup = activeElement.nextAll('.multiselect-group').first();

                // Show all elements between the previous and next multiselect-group
                previousGroup.nextUntil(nextGroup, '.multiselect-group-option-indented-full').show();
            });
        }
    });

    $('.dropdown-toggle').on('click mouseleave', function (e) {
        // if (e.type === "mouseleave" && !$(this).next('.multiselect-container').hasClass("show")) {
        //     return false;
        // }
        if (e.type === "click") {
            $(this).next('.multiselect-container').toggleClass('show');
        } else if (e.type === "mouseleave" && $(this).next('.multiselect-container').hasClass("show")) {
            function hideMultiselectOptions() {
                $('.dropdown-toggle + .multiselect-container.show').removeClass("show");
                document.body.removeEventListener("click", hideMultiselectOptions, false);
            }
            document.body.addEventListener("click", hideMultiselectOptions, false);
        }
    });

    const allSpanMultiSelect = document.querySelectorAll(".form-advanced-search .multiselect-selected-text");
    allSpanMultiSelect?.forEach(spanMultiSelect => {
        spanMultiSelect.addEventListener("DOMSubtreeModified", () => checkFilledMultiSelect(spanMultiSelect));
        checkFilledMultiSelect(spanMultiSelect);
    });

    function checkFilledMultiSelect(spanMultiSelect) {
        const selectElement = spanMultiSelect.closest(".multiselect-native-select").querySelector("select");
        const label = spanMultiSelect.closest(".multiselect-native-select").nextElementSibling;
        if (selectElement.dataset.title === spanMultiSelect.innerText) {
            label?.classList.remove("filled");
        } else {
            label?.classList.add("filled");
        }
    }

    setTimeout(() => {
        document.querySelectorAll(".multiselect-group")?.forEach(item => {
            let inputCheckbox = document.createElement("input");
            inputCheckbox.type = "checkbox";
            item.prepend(inputCheckbox);
            item?.addEventListener("click", (e) => {
                inputCheckbox.checked = !inputCheckbox.checked;
            });
        })
    }, 1000);

    /********************************************************** Slider frontpage *********************************************/
    const frontPageSlider = $(".block-banner-home");
    const imgSlide = $(".slider-main");
    const transition = $(".slider-overlay");

    const cache = new Set();
    function imageSource(folder, nbrImg = 10) {
        let img = Math.floor(Math.random() * nbrImg) + 1;

        while (cache.has(img)) {
            img = Math.floor(Math.random() * nbrImg) + 1;
        }
        cache.add(img);
        if (cache.size === nbrImg) {
            cache.clear()
        }

        return "/sites/all/themes/africawork3/img/homeSlider/" + folder + '/'+ img +".jpg";
        // return "../img/homeSlider/" + folder + '/' + img + ".jpg";
    }

    // if(frontPageSlider.length != 0 && $(window).width() > 991) {
    if (frontPageSlider.length != 0 && imgSlide.length !== 0 && transition.length !== 0) {
        const folder = $('#main-content-home').hasClass('wa') ? 'wa' : 'ba';
        imgSlide.attr('src', imageSource(folder));
        transition.attr('src', imgSlide.attr('src'));
        setInterval(function () {
            let srcImg = imageSource(folder);
            imgSlide.attr('src', srcImg);
            transition.animate({
                opacity: 0
            }, 3000, function () {
                $(this).animate({
                    opacity: 1
                }, 3500)
            })
            setTimeout(() => {
                transition.attr('src', srcImg);
            }, 3000);

        }, 7000)
    }

    document.onreadystatechange = function () {
        if (document.readyState == "complete") {
            setTimeout(() => {
                document.querySelectorAll(".resizable-textarea .cke").forEach(item => {
                    const ckeContent = item.querySelector("div.cke_contents");
                    const iframe = ckeContent.querySelector("iframe").contentDocument.body;
                    ckeContent.style.height = `${iframe.clientHeight+40}px`;

                    const observerIframe = new MutationObserver((mutationsList, observer) => {
                        for (let mutation of mutationsList) {
                            if(mutation.type == "childList") {
                                clearTimeout(observer.timeout);
                                observer.timeout = setTimeout(() => {
                                    ckeContent.style.height = `${iframe.clientHeight + 40}px`;
                                }, 5);
                            }
                        }
                    });
                    observerIframe?.observe(iframe, { attributes: true, childList: true, subtree: true });
                });
            }, 1000);
        }
    }

    // Disabled checkbox de l'admin

    function disableDisabledInput(element) {
        setTimeout(() => {
            element?.removeAttribute("disabled");
        }, 1500);
    }

    const disabledCheckbox = document.querySelector(".role-other #edit-path-pathauto");

    if (disabledCheckbox) {
        disableDisabledInput(disabledCheckbox);
        disabledCheckbox?.addEventListener("click", (e) => {
            if (e.target.checked) {
                disableDisabledInput(e.target)
            }
        });
    }
});
/* *********************************************************************************************************** */
;
Drupal.behaviors.gloabalBehavior = {
  attach: function (context, settings) {
    const consentMessages = {
      fr: {
        message: "Nous utilisons des cookies pour vous offrir la meilleure expérience utilisateur possible. En continuant à utiliser notre site, vous acceptez leur utilisation. <a class='cookie-consent-link' href='/conditions-generales-utilisation' target='_blank'>En savoir plus</a>",
      },
      en: {
        message: "We use cookies to provide you with the best possible user experience. By continuing to use our site, you agree to their use. <a class='cookie-consent-link' href='/terms-of-use' target='_blank'>Learn more</a>",
      }
    };
    // Get current language from the HTML tag
    const currentLanguage = jQuery('html').attr('lang') || 'fr'; // default to French if undefined
    const { message, linkUrl, linkText } = currentLanguage === 'fr' ? consentMessages.fr : consentMessages.en;
    // Construct the consent HTML using template literals for cleaner syntax
    const consentHTML = `
        <div id="cookie-consent" class="cookie-consent container" style="display: none">
          <div class="cookie-consent-content">
            <a class="close-cookie-consent">X</a>
            <p>${message}</p>
          </div>
        </div>
      `;
    // Append the cookie consent HTML to the body
    // jQuery('body').append(consentHTML);
    jQuery(consentHTML).insertBefore(".footer-mobile");

    // Event listener for closing the consent message
    jQuery('body').on('click', '.close-cookie-consent', function () {
      jQuery('#cookie-consent').fadeOut(); // use fadeOut for a smoother dismissal
    });


    // Check if the user has already accepted cookies
    if (!getCookie('cookieConsent')) {
      jQuery('#cookie-consent').show();
    }

    jQuery('.close-cookie-consent').click(function () {
      setCookie('cookieConsent', 'accepted', 365);
      jQuery('#cookie-consent').animate({ bottom: '-100px' }, 500, function () {
        jQuery(this).hide();
      });
    });

    // Function to set a cookie
    function setCookie(name, value, days) {
      var expires = "";
      if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        expires = "; expires=" + date.toUTCString();
      }
      document.cookie = name + "=" + (value || "") + expires + "; path=/";
    }

    // Function to get a cookie
    function getCookie(name) {
      var nameEQ = name + "=";
      var ca = document.cookie.split(';');
      for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
      }
      return null;
    }

    // Custom code to be run on page load and on Ajax load

    // Deplacer counter dans form-group-info
    const allCounter = document.querySelectorAll(".counter");
    allCounter?.forEach(element => {
      element.classList.add("form-group-info")
      const formGroupItem = element.closest(".form-group-item");
      formGroupItem?.prepend(element);
    });

    // jQuery
    jQuery(document).ready(function ($) {
      $(".hierarchical-select .form-submit", context).hide();

      /**
       * On active la soumission automatique pour tous les champs de type hierarchical select
       * SAUF les champs de type language
       */
      $(".hierarchical-select .form-select:not(.processed)").addClass("processed").each(function () {

        $(this).change(function () {
          if ($("option:selected", this).hasClass("has-no-children")) {
            var hsid = $(this).attr('id');
            var found = false;
            if (hsid.search("field-candidat-langue") >= 0) {
              var selected_lang = $("select[id^=edit-field-candidat-langue-und-hierarchical-select-selects-0]").find(":selected").text();
              $(".field-candidat-langue-dropbox .dropbox-item:not(.dropbox-selected-item)").each(function () {
                if ($(this).text() == selected_lang) {
                  found = true;
                }
              });
            } else if (hsid.search("field-offre-niveau-langue") >= 0) {
              var selected_lang = $("select[id^=edit-field-offre-niveau-langue-und-hierarchical-select-selects-0]").find(":selected").text();
              $(".field-offre-niveau-langue-dropbox .dropbox-item:not(.dropbox-selected-item)").each(function () {
                if ($(this).text() == selected_lang) {
                  found = true;
                }
              });
            }
            dropboxLimitExceeded = $('#' + hsid).parents(".hierarchical-select-wrapper").children(".hierarchical-select-dropbox-limit-warning").length > 0;
            if (!dropboxLimitExceeded && !found) {
              $(this).parents(".hierarchical-select").children(".form-submit").click();
            }
          }
        });

      });

      /*********** Cocher/decocher des inputs pour les option max, min, exact, all, none ****************/
      $('.form-checkbox-filter a').click(function (e) {
        e.preventDefault();
        const parent = $(this).closest('.form-group-item')[0];
        $(parent).find('a').removeClass('active');
        $(this).addClass('active');

        // décocher tous les inputs si on change d'option( Minimum - Maximum - Exact )
        const checkboxes = $(parent).find("input");
        const SelectedOption = $(parent).find("a.active")[0];

        Array.from(checkboxes).map(input => {
          input.checked = false;
          $(input).removeClass('checked');

          if (SelectedOption.classList.contains("all")) {
            input.checked = true;
            $(input).addClass('checked');
          }

          if (SelectedOption.classList.contains("not-all")) {
            input.checked = false;
            $(input).removeClass('checked');
          }
        });
      });

      const formGroupItem = $(".form-checkbox-filter").closest('.form-group-item');
      const allCheckboxes = $(formGroupItem).find("input");
      Array.from(allCheckboxes).map(input => {
        $(input).click(function () {
          // Empêcher de décocher les cases au milieu si les options min ou  max sont sélectionnées
          if (input.classList.contains("checked")) {
            return false;
          }
          const blockLevel = $(input).closest('.form-group-item')[0];
          const SelectedOption = $(blockLevel).find("a.active")[0];
          const checkboxes = $(blockLevel).find("input");
          const selectedInput = input.value;

          // Option de selection Minimum - Maximum
          Array.from(checkboxes).map(input => {
            if (SelectedOption.classList.contains("minimum") && input.value > selectedInput) {
              input.checked = true;
              $(input).addClass('checked');
            }

            if (SelectedOption.classList.contains("maximum") && input.value < selectedInput) {
              input.checked = true;
              $(input).addClass('checked');
            }
          });

        });
      });


      // Add to folder
      $(".bookmark-form-select a").click(function (e) {
        e.preventDefault();
        const btn = this;
        // $('.directories-list-wrapper').hide();
        let vnid = $(this).attr('id');
        let msgconf = "msg_flag_" + vnid;
        let addflag = "add_flag_" + vnid;
        let selId = 'sel_' + vnid;
        let vfid = $('#' + selId + ' option:selected').val();
        let delflag = "remove-flag-" + vnid;
        let path = Drupal.settings.basePath + "saved-applications/addflagapplication";
        let saved_folder = "saved-folder-" + vnid;
        let value_folder = "value-" + vnid;

        $.post(path, { fid: vfid, nid: vnid }, function (data, status) {
          if (status == 'success') {
            data = data.split(':');
            $(btn).closest(".bookmark-form").find(".x-close").click();
            // $('.directories-list-wrapper').hide();
            $("#" + addflag).attr('id', delflag + '-wrapper');
            $("#select-flags-directory-" + vnid).attr('id', delflag);
            $("#" + delflag).attr("rel", vnid + ":" + vfid);
            $("#" + delflag).text($('#del_title_link').text());
            $("#" + vnid).removeAttr('selected').find('option:first').attr('selected', 'selected');
            $("#" + msgconf).text(data[0]);
            $("#" + value_folder).text(data[1]);
            $("#" + saved_folder).show();
            $("#" + delflag).show();
            $("#" + delflag).addClass("full");
            $("#" + delflag).attr("title", (currentLanguage === 'fr' ? 'Retirer du dossier' : 'Remove from directory'));
            $("#" + msgconf).show();
          }
        });

        setTimeout(function () {
          $(".msg_flag").hide();
          $(".msg_flag").text('');
        }, 5000);

      });

      // remove from folder
      $('div').on('click', 'a[id^="remove-flag-"]', function (e) {
        e.preventDefault();
        let vid = $(this).attr('rel');
        if (vid.indexOf(':') == -1) {
          return;
        }
        const removeFlag = $(this)[0];
        if ($(removeFlag).closest(".applications-profile-data").length === 1) {
          $(removeFlag).closest(".applications-profile-data").find(".bookmark-form").removeClass("show");
        } else if ($(removeFlag).closest(".flag-link").length === 1) {
          $(removeFlag).closest(".flag-link").find(".bookmark-form").removeClass("show");
        }

        vid = vid.split(':');
        let vnid = vid[0];
        let vfid = vid[1];
        let $this = $(this);
        msgconf = "msg_flag_" + vnid;
        addflag = "add_flag_" + vid[0];
        delflag = "remove-flag-" + vnid + '-wrapper';
        link_nid = "remove-flag-" + vnid;
        saved_folder = "saved-folder-" + vnid;
        path = Drupal.settings.basePath + "saved-applications/delflagapplication/" + vfid + "/" + vnid;
        $.post(path, function (data, status) {
          if (status == 'success') {
            $("#" + msgconf).text(data);
            $this.attr('title', (currentLanguage === 'fr' ? 'Ajouter au dossier' : 'Add to directory'));
            $("#" + delflag).attr('id', addflag);
            $("#" + link_nid).text($('#add_title_link').text());
            $("#" + link_nid).attr("rel", vnid);
            $("#" + link_nid).attr("id", "select-flags-directory-" + vnid);
            $("#" + saved_folder).hide();
            $(removeFlag).removeClass("full");
            $("#" + msgconf).show();
          }
        });

        setTimeout(function () {
          $(".msg_flag").hide();
          $(".msg_flag").text('');
        }, 5000);
        return true;
      });

      // Add to new folder
      $(".bookmark-form-add a").click(function () {
        // let validSelect = $(this.parentElement.parentElement.parentElement).find('.validSelect');
        const btnBookmarkFormSelect = $(this).closest('.bookmark-form').find('.bookmark-form-select a');
        let btnAddFile = $(this);
        $('.form-error').text('');
        // var vid = $(this).attr('rel');
        const infoBulle = $(this).closest('.applications-profile-data').find('.info-bulle');
        // $('.msgSuccess').text('');
        // vtitle = $('#fName').val();
        vtitle = $(this).closest('.newFolderField').find('#fName').val();
        // vmsgInput = Drupal.t('Enter the name of your folder');
        if (vtitle == "") {
          $('.form-error').addClass(".error")
          $('.form-error').text(Drupal.t('Enter valid name of your folder'));
          // $('.msgError').show();
          // $('#fName').val('');
          return false;
        } else if (vtitle.length < 3 || vtitle.length > 70) {
          msg = Drupal.t('The length of your folder should be between 3 and 70 caracters max');
          $('.form-error').text(msg);
          // $('.msgError').show();
          // $('#fName').val('');
          return false;
        }
        path = Drupal.settings.basePath + "saved-applications/addflagfolder";

        $.post(path,
          {
            title: vtitle
          },
          function (data, status) {
            if (status == 'success') {
              data = data.split(':');
              if (data[0] > 0) {
                $(btnAddFile).closest(".bookmark-form").find(".x-close").click();
                fid = data[0];
                selectBox = '.flag_folder';
                // nameFolder = $('#fName').val();
                $(selectBox).each(function () {
                  $(this).prepend('<option value="' + fid + '" selected>' + vtitle + '</option>');
                })
                $(infoBulle).text(data[1]);
                // $('.msgSuccess').show();
                // $('#fName').val('');
                $(btnAddFile).closest('.newFolderField').find('#fName').val('');
                // $(validSelect).click();
                $(btnBookmarkFormSelect).click();
                $(btnAddFile).closest('.bookmark-form-add').find("#addNewFolder").click();
                // $('.addflag').show();
                // $(btnAddFile).closest('#contenair-add-folder').hide();
                $('.form-error').text('');
                // $('.msgSuccess').text('');

              } else {
                $('#fName').val('');
                $('.form-error').text(data[1]);
                // $('.msgError').show();
              }
            }
          });
        return false;
      });
    })
  }
}

Drupal.behaviors.bookmarkForm = {
  attach: function (context, settings) {
    jQuery(document).ready(function ($) {
      /* *********************************************************************************************************** */
      // Popup bookmark dans recherche candidat pour recruteur connecté
      const allButtonShowBookmarkForm = document.querySelectorAll("a.icon.bookmark");
      const allButtonCloseBookmarkForm = document.querySelectorAll(".bookmark-form .x-close");
      const popupDismissBookmarkForm = document.querySelector(".popup-dismiss.bookmark-form-dismiss");
      allButtonShowBookmarkForm?.forEach(button => {
        button?.addEventListener("click", (e) => {
          e.preventDefault();
          let form = button?.closest(".applications-profile-data")?.querySelector(".bookmark-form");
          if (!form) {
            form = button?.closest(".card-block-content")?.querySelector(".bookmark-form");
            if(!form) {
              window.location = e.target.href;
              return false;
            }
          }
          if(!e.target.classList.contains("full")) {
            // popupDismissBookmarkForm?.classList.add("show");
            document.querySelectorAll(".bookmark-form, .annotate-form")?.forEach(item => {
              item.classList.remove("show");
            });
            form.classList.add("show");
          }
        });
      });
      allButtonCloseBookmarkForm?.forEach(button => {
        button?.addEventListener("click", (e) => {
          e.preventDefault();
          const form = button.closest(".bookmark-form");
          // popupDismissBookmarkForm?.classList.remove("show");
          form.classList.remove("show");
        });
      });
      popupDismissBookmarkForm?.addEventListener("click", (e) => {
        document.querySelector(".bookmark-form.show")?.classList.remove("show");
        e.target.classList.remove("show");
      });

      const allAddNewFolder = document.querySelectorAll(".addNewFolder");
      allAddNewFolder.forEach(input => {
        input.checked = false;
        input.addEventListener("click", (e) => {
          const target = e.target;
          const newFolderField = target.closest(".bookmark-form").querySelector(".newFolderField");
          const selectFolderField = target.closest(".bookmark-form").querySelector(".bookmark-form-select");
          selectFolderField.classList.toggle("hide");
          newFolderField.classList.toggle("show");
          showHideFormGroup(newFolderField, target.checked);
        });
      });

      document.querySelectorAll(".profile-btn-annotations a")?.forEach(button => {
        button.addEventListener("click", (e) => {
          e.preventDefault();
          const annotateForm = button.closest(".applications-profile-data")?.querySelector(".annotate-form");
          let nid = button.getAttribute("data-application");
          let uid = button.getAttribute("data-uid");
          getAnnotationContent(uid, nid, annotateForm);
          document.querySelectorAll(".bookmark-form, .annotate-form")?.forEach(item => {
            item.classList.remove("show");
          });
          annotateForm?.classList.toggle("show");
          document.querySelector(".group-bulk-operations")?.classList.add("hide");
        });
      });

      document.querySelectorAll(".annotate-form button.annotate-form-save")?.forEach(button => {
        button.addEventListener("click", (e) => {
          e.preventDefault();
          const annotateForm = button.closest(".annotate-form");
          let nid = button.getAttribute("data-nid");
          let uid = button.getAttribute("data-uid");
          let containerId = annotateForm.parentElement.id;

          let candidatureNote = annotateForm.querySelector("textarea") ? annotateForm.querySelector("textarea").value : '';
          let candidatureInteret = annotateForm.querySelector("input[name='field_candidature_interet']:checked") ? annotateForm.querySelector("input[name='field_candidature_interet']:checked").value : '';
          let candidatureStatut = annotateForm.querySelector("input[name='field_candidature_statut']:checked") ? annotateForm.querySelector("input[name='field_candidature_statut']:checked").value : '';

          let formData = {
            candidature_note: candidatureNote,
            candidature_interet: candidatureInteret,
            candidature_statut: candidatureStatut,
          };

          saveAnnotationContent(uid, nid, formData, containerId);
        });
      });

      document.querySelectorAll(".annotate-form button.annotate-form-delete")?.forEach(button => {
        button.addEventListener("click", (e) => {
          e.preventDefault();
          const annotateForm = button.closest(".annotate-form");
          let nid = button.getAttribute("data-nid");
          let uid = button.getAttribute("data-uid");
          let containerId = annotateForm.parentElement.id;
          let path = '/emacandidature/manage-applications/annotation/' + uid + '/' + nid + '/DELETE';
          $.get(path, function (response, status) {
            if (status == 'success') {
              let message = document.createElement("div");
              message.classList.add("alert", "alert-success");
              message.textContent = response.data.message;
              document.querySelector('#' + containerId).prepend(message);
              let iconLink = document.querySelector("#annotations-form-" + nid + " > a.icon");
              if (iconLink) {
                iconLink.classList.forEach(className => {
                  if (className.startsWith('interest-')) {
                    iconLink.classList.remove(className);
                  }
                });
              } else {
                console.error("Icon link not found");
              }
              iconLink.classList.add('interest-' + response.data.class);

              annotateForm.querySelector("textarea").value = '';
              const interetChecked = annotateForm.querySelector("input[name='field_candidature_interet']:checked");
              if (interetChecked) { interetChecked.checked = false; }
              const statutChecked = annotateForm.querySelector("input[name='field_candidature_statut']:checked");
              if (statutChecked) { statutChecked.checked = false; }
              document.querySelector("#annotations-form-" + nid + " .annotate-form").classList.remove("show");
            }
          });
        });
      });

      function getAnnotationContent(uid, nid, annotateForm) {
        let path = '/emacandidature/manage-applications/annotation/' + uid + '/' + nid + '/GET';
        $.get(path, function (response, status) {
          if (status == 'success') {
            // Populate the notes textarea
            annotateForm.querySelector("textarea").value = response.data.candidature_note;

            // Populate the rating radios
            let ratingContainer = annotateForm.querySelector(".form-radios[name='rating']");
            ratingContainer.innerHTML = ''; // Clear existing options
            for (const [tid, name] of Object.entries(response.data.rating_application_opts)) {
              ratingContainer.innerHTML += `
          <div class="form-checkbox mb-1">
            <input type="radio" name="field_candidature_interet" value="${tid}" id="rating-${tid}" ${response.data.candidature_interet == tid ? 'checked' : ''} />
            <label for="rating-${tid}">${name}</label>
          </div>`;
            }

            // Populate the status radios
            let statusContainer = annotateForm.querySelector(".form-radios[name='status']");
            statusContainer.innerHTML = ''; // Clear existing options
            for (const [tid, name] of Object.entries(response.data.recruitment_status_opts)) {
              statusContainer.innerHTML += `
          <div class="form-checkbox mb-1">
            <input type="radio" name="field_candidature_statut" value="${tid}" id="status-${tid}" ${response.data.candidature_statut == tid ? 'checked' : ''} />
            <label for="status-${tid}">${name}</label>
          </div>`;
            }
          }
        });
      }

      function saveAnnotationContent(uid, nid, data, containerId) {
        let path = '/emacandidature/manage-applications/annotation/' + uid + '/' + nid + '/POST';
        $.post(path, data, function (response, status) {
          if (status == 'success') {
            let message = document.createElement("div");
            message.classList.add("alert", "alert-success");
            message.textContent = response.data.message;
            document.querySelector('#' + containerId).prepend(message);
            document.querySelector("#annotations-form-" + nid + " .annotate-form").classList.remove("show");

            let iconLink = document.querySelector("#annotations-form-" + nid + " > a.icon");
            if (iconLink) {
                iconLink.classList.forEach(className => {
                  if (className.startsWith('interest-')) {
                    iconLink.classList.remove(className);
                  }
                });
            } else {
              // console.error("Icon link not found");
            }
            iconLink.classList.add('interest-' + response.data.class);
            document.querySelector(".group-bulk-operations")?.classList.remove("hide");
          } else {
            let message = document.createElement("div");
            message.classList.add("alert", "alert-danger");
            message.textContent = response.data.message;
            document.querySelector('#' + containerId).prepend(message);
            document.querySelector("#annotations-form-" + nid + " .annotate-form").classList.remove("show");
          }
        });
      }

      document.querySelectorAll(".annotate-form-dismiss")?.forEach(button => {
        button.addEventListener("click", (e) => {
          e.preventDefault();
          const annotateForm = button.closest(".applications-profile-data")?.querySelector(".annotate-form");
          annotateForm?.classList.remove("show");
          document.querySelector(".group-bulk-operations")?.classList.remove("hide");
        });
      });
    })
  }
}

Drupal.behaviors.africawork_global = {
  attach: function (context, settings) {
    jQuery(document).ready(function ($) {
      // add bookmarked file
      // $('div.flag-link').on('click', 'a[id^="select-flags-directory-"]', function () {
      //   // var id = $(this).attr('rel');
      //   // $('.addflag').show();
      //   // $('.directories-list-wrapper').hide();
      //   // $(this).hide();
      //   // $('#directories-list-wrapper-' + id).show();
      //   return false;
      // });

      if ($('.refresh-viewer-document').length) {
        $('.refresh-viewer-document').click(function (e) {
          e.preventDefault();
          let path = $(this).data('href');
          let viewer = $(this).next('iframe');
          viewer.attr('src', path);
        });
      }

      // remove bookmarked file
      $('div.flag-link').on('click', 'a[id^="remove-flag-"]', function () {
        var vid = $(this).attr('rel');
        if (vid.indexOf(':') == -1) {
          return;
        }
        vid = vid.split(':');
        vnid = vid[0];
        vfid = vid[1];
        msgconf = "msg_flag_" + vnid;
        addflag = "add_flag_" + vid[0];
        delflag = "remove-flag-" + vnid + '-wrapper';
        link_nid = "remove-flag-" + vnid;
        saved_folder = "saved-folder-" + vnid;
        path = Drupal.settings.basePath + "saved-applications/delflagapplication/" + vfid + "/" + vnid;
        $.post(path, function (data, status) {
          if (status == 'success') {
            $("#" + msgconf).text(data);
            $("#" + delflag).attr('id', addflag);
            $("#" + link_nid).text($('#add_title_link').text());
            $("#" + link_nid).attr("rel", vnid);
            $("#" + link_nid).attr("id", "select-flags-directory-" + vnid);
            $("#" + saved_folder).hide();
          }
        });

        $("#" + msgconf).show();
        setTimeout(function () {
          $(".msg_flag").hide();
          $(".msg_flag").text('');
        }, 5000);
        return true;
      });
    });
}}

Drupal.behaviors.inputTypeFile = {
  attach: function (context, settings) {
    jQuery(document).ready(function ($) {
      // Callback function to execute when mutations are observed
      const callback = (mutationsList, observer) => {
        for (let mutation of mutationsList) {
          if (mutation.type == "attributes") {
            clearTimeout(observer.timeout);
            observer.timeout = setTimeout(() => {
              const wrapper = mutation.target.closest(".form-field");
              const alert = wrapper?.querySelector(".alert");
              wrapper?.closest(".form-group-item")?.querySelector(".form-field + .movedAlert")?.remove();
              if (alert) {
                alert.classList.add("movedAlert");
                wrapper.closest(".form-group-item").appendChild(alert);
              }

              if (wrapper?.querySelector(".file-details")) {
                wrapper.classList.remove("uploaded");
              } else {
                wrapper?.classList.add("uploaded");
              }
            }, 500);
          }
        }
      };
      const config = { attributes: true, childList: true, subtree: true };
      const observer = new MutationObserver(callback);

      function fileUploadEvent(input) {
        const file = input.files[0];
        const wrapper = input.closest(".form-field");
        const buttonSubmit = wrapper.querySelector("input[type='submit']");
        $(wrapper).find('.form-error').addClass('d-none');
        if (file) {
          $(buttonSubmit).mousedown();

          if (wrapper.querySelector(".field-type-file")) {
            observer?.observe(wrapper.querySelector(".field-type-file"), config);
          } else if (wrapper.querySelector(".field-type-image")) {
            observer?.observe(wrapper.querySelector(".field-type-image"), config);
          }
        } else {
          $(wrapper).find('.form-error').removeClass('d-none').addClass('d-flex')
        }
      }

      const allFileInput = document.querySelectorAll("input[type='file'], .image-widget-data input[type='submit'], .file-widget-data input[type='submit']");
      allFileInput.forEach(input => {
        // if (input.value && input.files) {
        //   fileUploadEvent(input);
        // }
        const wrapper = input.closest(".form-field");
        wrapper?.addEventListener('click', (e) => {
          if (e.target.type === "file") {
            e.target.addEventListener("change", () => {
              fileUploadEvent(e.target);
            })
          } else if (e.target.classList.contains("revoke")) {
            wrapper.classList.remove("uploaded");
            $(wrapper.querySelector("input[type='submit']")).mousedown();
            wrapper?.closest(".form-group-item")?.querySelector(".form-field + .movedAlert")?.remove();
            const filePlaceholder = wrapper.querySelector(".file-placeholder.image");
            if (filePlaceholder) {
              filePlaceholder.style.backgroundImage = "";
              filePlaceholder.classList.remove("image");
            }
            if(input.type === "file") {
              const inputAddNewResume = e.target.closest(".form-section").querySelector("#addNewResume");
              setTimeout(() => {
                const inpuFile = inputAddNewResume.closest(".form-section").querySelector("input[type='file']");
                if (inputAddNewResume.checked) {
                  inpuFile.setAttribute("required", true);
                }
              }, 500);
            }
          }
        });
      });

    })
  }
}

Drupal.behaviors.inputSelectYesno = {
  attach: function (context, settings) {
    jQuery(document).ready(function ($) {
      $("#adsQuestions select").on("change", function(e) {
        if($(this).val() === "yesno") {
          $("#questionTypeInfo").addClass("show");
        }
      });
      $(".close-modal").on("click", function() {
        $("#questionTypeInfo").removeClass("show");
      })
    })
  }
}

Drupal.behaviors.uiAutoComplete = {
  attach: function (context, settings) {
    jQuery(document).ready(function ($) {
      $(".autocomplete-deluxe-multiple input").on("keyup", function() {
        $("ul.ui-autocomplete").addClass("show");
      })
      $(".autocomplete-deluxe-multiple input").on("blur", function() {
        $("ul.ui-autocomplete").removeClass("show");
      })
    })
  }
}

/* *********************************************************************************************************** */
// Every input, textarea and select when filled
Drupal.behaviors.checkForFilledInput = {
  attach: function (context, settings) {
    jQuery(document).ready(function ($) {
      function fillingFormCheck() {
        const inputs = document.querySelectorAll(".form-field input, .form-field select, .form-field textarea");
        inputs?.forEach((input) => {
          if (input.type === "hidden") {
            return false;
          }

          if (input.classList.contains("required")) {
            if (input.nodeName != "TEXTAREA") {
              input.setAttribute("required", true);
            }
          }

          const formLabel = input?.closest(".form-field").querySelector("label");

          if(input.getAttribute("name") === "field_candidat_date_naissance[date]" && formLabel) {
            input?.addEventListener("blur", () => {
              setTimeout(() => {
                  blurChangeEvent(input, formLabel);
              }, 500);
            });
            return false;
          }

          if (input?.value !== "" && formLabel && input.type !== "radio" && input.type !== "checkbox") {
            formLabel?.classList.add("filled");
          }

          let style = window.getComputedStyle(input);
          if (style && style.backgroundColor !== "rgb(255, 255, 255)" && formLabel) {
            formLabel?.classList.add("filled");
          }

          if (!input.classList.contains("blurChangeEvent")) {
            input?.addEventListener("blur", () => blurChangeEvent(input, formLabel));
            input?.addEventListener("input", () => blurChangeEvent(input, formLabel, true));
          }
        });

        function blurChangeEvent(input, formLabel, inputEvent) {
          input.classList.add("blurChangeEvent");
          if (inputEvent && input.classList.contains("error")) {
            input.classList.remove("error");
            const formError = input.closest(".form-group-item").querySelector(".form-error");
            if (formError) {
              formError.innerText = "";
            }
          }

          if (input.value !== "" && formLabel && input.type !== "radio" && input.type !== "checkbox") {
            formLabel?.classList.add("filled");
          } else {
            formLabel?.classList.remove("filled");
          }
        }
      }
      fillingFormCheck();
    })
  }
}

// Drupal.behaviors.inputWithClassnamePhone = {
//   attach: function (context, settings) {
//     jQuery(document).ready(function ($) {

//     })
//   }
// }
;
